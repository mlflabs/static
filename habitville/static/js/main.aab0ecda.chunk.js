(this.webpackJsonphabitville=this.webpackJsonphabitville||[]).push([[7],{102:function(e,t,n){},155:function(e){e.exports=JSON.parse('{"v":"5.4.4","fr":24,"ip":0,"op":28,"w":50,"h":50,"nm":"check-circle","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Mask 1","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":7,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-1.84,11.868],[-11.41,3.818],[-3.691,-5.056],[4.972,3.868]],"c":true}],"e":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-1.84,11.868],[-11.41,3.818],[2.747,-12.743],[11.41,-3.82]],"c":true}]},{"t":10}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.216000007181,0.075,0.298000021542,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[38.326,14.285],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":14,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Circle 2","tt":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[11.61,0],[0,11.61],[-11.61,0],[0,-11.61]],"o":[[-11.61,0],[0,-11.61],[11.61,0],[0,11.61]],"v":[[0,21],[-21,0],[0,-21],[21,0]],"c":true},"ix":2},"nm":"Path 3","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[12.69,0],[0,-12.69],[-12.69,0],[0,12.69]],"o":[[-12.69,0],[0,12.69],[12.69,0],[0,-12.69]],"v":[[0,-23],[-23,0],[0,23],[23,0]],"c":true},"ix":2},"nm":"Path 4","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[25,25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":14,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Check 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-14.45,3.5],[-5.55,11.8],[14.45,-11.8]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[29.55,20.2],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":3,"s":[0],"e":[100]},{"t":11}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":14,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Mask 2","td":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":22,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[-1.84,11.868],[-11.41,3.818],[2.747,-12.743],[11.41,-3.82]],"c":true}],"e":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[4.951,2.681],[-3.368,-5.869],[2.747,-12.743],[11.41,-3.82]],"c":true}]},{"i":{"x":0.833,"y":0.833},"o":{"x":0.167,"y":0.167},"t":24,"s":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[4.951,2.681],[-3.368,-5.869],[2.747,-12.743],[11.41,-3.82]],"c":true}],"e":[{"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[11.91,-4.632],[2.34,-12.682],[2.747,-12.743],[11.41,-3.82]],"c":true}]},{"t":25}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.216000007181,0.075,0.298000021542,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[38.326,14.285],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":14,"op":28,"st":14,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Circle 3","tt":2,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[11.61,0],[0,11.61],[-11.61,0],[0,-11.61]],"o":[[-11.61,0],[0,-11.61],[11.61,0],[0,11.61]],"v":[[0,21],[-21,0],[0,-21],[21,0]],"c":true},"ix":2},"nm":"Path 3","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[12.69,0],[0,-12.69],[-12.69,0],[0,12.69]],"o":[[-12.69,0],[0,12.69],[12.69,0],[0,-12.69]],"v":[[0,-23],[-23,0],[0,23],[23,0]],"c":true},"ix":2},"nm":"Path 4","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[25,25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":14,"op":28,"st":14,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Check 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-14.45,3.5],[-5.55,11.8],[14.45,-11.8]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":1,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[29.55,20.2],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":17,"s":[0],"e":[100]},{"t":25}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":14,"op":28,"st":14,"bm":0}],"markers":[]}')},156:function(e){e.exports=JSON.parse('{"v":"5.4.4","fr":24,"ip":0,"op":28,"w":50,"h":50,"nm":"Restart","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Arrow 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":21,"s":[-115],"e":[-90]},{"t":25}],"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,12.15],[12.15,0],[0,-12.15],[-12.15,0]],"o":[[0,-12.15],[-12.15,0],[0,12.15],[12.15,0]],"v":[[22,0],[0,-22],[-22,0],[0,22]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[25,25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":21,"s":[59],"e":[11]},{"t":25}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":21,"s":[100],"e":[100]},{"t":25}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":21,"op":29,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Arrow 3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":180,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-9,-9],[8.592,-8.591],[8.591,8.592],[-8.592,8.591],[-0.703,0.536]],"o":[[8.592,8.592],[-8.591,8.592],[-8.592,-8.591],[0,0],[5.25,-4]],"v":[[16.778,-16.574],[14.334,16.982],[-16.778,16.982],[-16.778,-14.13],[-14.222,-16.574]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[26.222,23.574],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 6","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":19,"s":[0],"e":[31]},{"t":21}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":17,"s":[0],"e":[17]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":19,"s":[17],"e":[71]},{"t":21}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":17,"op":22,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Arrow 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-9,-9],[8.592,-8.591],[8.591,8.592],[-8.592,8.591],[-0.703,0.536]],"o":[[8.592,8.592],[-8.591,8.592],[-8.592,-8.591],[0,0],[5.25,-4]],"v":[[16.778,-16.574],[14.334,16.982],[-16.778,16.982],[-16.778,-14.13],[-14.222,-16.574]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[26.222,23.574],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 6","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":5,"s":[15],"e":[41.667]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":7,"s":[41.667],"e":[79.667]},{"t":9}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":5,"s":[87],"e":[100]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":7,"s":[100],"e":[100]},{"t":9}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":5,"op":10,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Arrow","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":-90,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,12.15],[12.15,0],[0,-12.15],[-12.15,0]],"o":[[0,-12.15],[-12.15,0],[0,12.15],[12.15,0]],"v":[[22,0],[0,-22],[-22,0],[0,22]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[25,25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":10,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":3,"s":[100],"e":[85]},{"t":5}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":5,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Cross","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[18,-18],[-18,18]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":17,"s":[0],"e":[100]},{"t":20}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":7,"s":[0],"e":[100]},{"t":10}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[25,25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-18,-18],[18,18]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":17,"s":[0],"e":[100]},{"t":19}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":9,"s":[0],"e":[100]},{"t":11}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[25,25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":3,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":7,"op":26,"st":-2,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Arrowhead 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":23,"s":[-103],"e":[0]},{"t":25}],"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.167,"y":0},"t":23,"s":[{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-1.75,3.625],[5,-5],[-1.875,3.875]],"c":false}],"e":[{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[5,5],[5,-5],[-5,-5]],"c":false}]},{"t":25}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[7,12],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":23,"op":28,"st":22,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"Arrowhead","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":3,"s":[0],"e":[22]},{"t":5}],"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":3,"s":[{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[5,5],[5,-5],[-5,-5]],"c":false}],"e":[{"i":[[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0]],"v":[[-1.75,3.625],[5,-5],[-1.875,3.875]],"c":false}]},{"t":5}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[7,12],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":6,"st":0,"bm":0}],"markers":[]}')},157:function(e){e.exports=JSON.parse('{"v":"5.4.4","fr":24,"ip":0,"op":28,"w":50,"h":50,"nm":"sun-weather","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Sun","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-4.962,0],[0,-4.962],[4.962,0],[0,4.963]],"o":[[4.962,0],[0,4.963],[-4.962,0],[0,-4.962]],"v":[[0.001,-9],[9.001,0],[0.001,9],[-8.999,0]],"c":true},"ix":2},"nm":"Path 9","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[25,25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":28,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Rays","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0],"e":[45]},{"t":28}],"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[25,25,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[9.9,9.9],[14.143,14.142]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-14.143,-14.142],[-9.898,-9.898]],"c":false},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ind":2,"ty":"sh","ix":3,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[9.9,-9.898],[14.143,-14.142]],"c":false},"ix":2},"nm":"Path 3","mn":"ADBE Vector Shape - Group","hd":false},{"ind":3,"ty":"sh","ix":4,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-14.143,14.142],[-9.898,9.9]],"c":false},"ix":2},"nm":"Path 4","mn":"ADBE Vector Shape - Group","hd":false},{"ind":4,"ty":"sh","ix":5,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[14.001,0],[20.001,0]],"c":false},"ix":2},"nm":"Path 5","mn":"ADBE Vector Shape - Group","hd":false},{"ind":5,"ty":"sh","ix":6,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-19.999,0],[-13.999,0]],"c":false},"ix":2},"nm":"Path 6","mn":"ADBE Vector Shape - Group","hd":false},{"ind":6,"ty":"sh","ix":7,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.001,-14],[0.001,-20]],"c":false},"ix":2},"nm":"Path 7","mn":"ADBE Vector Shape - Group","hd":false},{"ind":7,"ty":"sh","ix":8,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.001,20],[0.001,14]],"c":false},"ix":2},"nm":"Path 8","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0,0,0,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":2,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[25,25],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":9,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0],"e":[40]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":14,"s":[40],"e":[0]},{"t":28}],"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[100],"e":[60]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":14,"s":[60],"e":[100]},{"t":28}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":28,"st":0,"bm":0}],"markers":[]}')},160:function(e,t,n){e.exports=n(334)},166:function(e,t,n){var a={"./ion-action-sheet-ios.entry.js":[338,37],"./ion-action-sheet-md.entry.js":[339,38],"./ion-alert-ios.entry.js":[340,21],"./ion-alert-md.entry.js":[341,22],"./ion-app_8-ios.entry.js":[342,10],"./ion-app_8-md.entry.js":[343,11],"./ion-avatar_3-ios.entry.js":[344,39],"./ion-avatar_3-md.entry.js":[345,40],"./ion-back-button-ios.entry.js":[346,41],"./ion-back-button-md.entry.js":[347,42],"./ion-backdrop-ios.entry.js":[348,79],"./ion-backdrop-md.entry.js":[349,80],"./ion-button_2-ios.entry.js":[350,43],"./ion-button_2-md.entry.js":[351,44],"./ion-card_5-ios.entry.js":[352,45],"./ion-card_5-md.entry.js":[353,46],"./ion-checkbox-ios.entry.js":[354,47],"./ion-checkbox-md.entry.js":[355,48],"./ion-chip-ios.entry.js":[356,49],"./ion-chip-md.entry.js":[357,50],"./ion-col_3.entry.js":[358,81],"./ion-datetime_3-ios.entry.js":[359,17],"./ion-datetime_3-md.entry.js":[360,18],"./ion-fab_3-ios.entry.js":[361,51],"./ion-fab_3-md.entry.js":[362,52],"./ion-img.entry.js":[363,82],"./ion-infinite-scroll_2-ios.entry.js":[364,35],"./ion-infinite-scroll_2-md.entry.js":[365,36],"./ion-input-ios.entry.js":[366,53],"./ion-input-md.entry.js":[367,54],"./ion-item-option_3-ios.entry.js":[368,55],"./ion-item-option_3-md.entry.js":[369,56],"./ion-item_8-ios.entry.js":[370,57],"./ion-item_8-md.entry.js":[371,58],"./ion-loading-ios.entry.js":[372,23],"./ion-loading-md.entry.js":[373,24],"./ion-menu_3-ios.entry.js":[374,59],"./ion-menu_3-md.entry.js":[375,60],"./ion-modal-ios.entry.js":[376,12],"./ion-modal-md.entry.js":[377,13],"./ion-nav_2.entry.js":[378,16],"./ion-popover-ios.entry.js":[379,14],"./ion-popover-md.entry.js":[380,15],"./ion-progress-bar-ios.entry.js":[381,61],"./ion-progress-bar-md.entry.js":[382,62],"./ion-radio_2-ios.entry.js":[383,63],"./ion-radio_2-md.entry.js":[384,64],"./ion-range-ios.entry.js":[385,65],"./ion-range-md.entry.js":[386,66],"./ion-refresher_2-ios.entry.js":[387,25],"./ion-refresher_2-md.entry.js":[388,26],"./ion-reorder_2-ios.entry.js":[389,33],"./ion-reorder_2-md.entry.js":[390,34],"./ion-ripple-effect.entry.js":[391,83],"./ion-route_4.entry.js":[392,67],"./ion-searchbar-ios.entry.js":[393,27],"./ion-searchbar-md.entry.js":[394,28],"./ion-segment_2-ios.entry.js":[395,68],"./ion-segment_2-md.entry.js":[396,69],"./ion-select_3-ios.entry.js":[397,70],"./ion-select_3-md.entry.js":[398,71],"./ion-slide_2-ios.entry.js":[399,84],"./ion-slide_2-md.entry.js":[400,85],"./ion-spinner.entry.js":[401,31],"./ion-split-pane-ios.entry.js":[402,86],"./ion-split-pane-md.entry.js":[403,87],"./ion-tab-bar_2-ios.entry.js":[404,72],"./ion-tab-bar_2-md.entry.js":[405,73],"./ion-tab_2.entry.js":[406,32],"./ion-text.entry.js":[407,74],"./ion-textarea-ios.entry.js":[408,75],"./ion-textarea-md.entry.js":[409,76],"./ion-toast-ios.entry.js":[410,29],"./ion-toast-md.entry.js":[411,30],"./ion-toggle-ios.entry.js":[412,19],"./ion-toggle-md.entry.js":[413,20],"./ion-virtual-scroll.entry.js":[414,88]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=166,e.exports=r},168:function(e,t,n){var a={"./ion-icon.entry.js":[418,96]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=168,e.exports=r},183:function(e,t,n){},184:function(e,t,n){},243:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},265:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},334:function(e,t,n){"use strict";n.r(t);var a,r,s,i=n(0),c=n.n(i),o=n(41),u=n.n(o),l=n(1),d=n(147),m=(n(173),n(174),n(175),n(176),n(177),n(178),n(179),n(180),n(181),n(182),n(183),n(184),n(8)),h=n(10),f=n(12),p=n(422),v=new(function(){function e(){Object(h.a)(this,e),this._loading=!1,this.loading$=new p.a({show:this._loading,msg:"Loading..."})}return Object(f.a)(e,[{key:"showLoading",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Loading...";this._loading=!0,this.loading$.next({show:!0,msg:e})}},{key:"hideLoading",value:function(){this._loading=!1,this.loading$.next({show:!1,msg:""})}},{key:"startLoadingTimer",value:function(){}},{key:"loading",get:function(){return this._loading}}]),e}()),b=function(){var e=Object(i.useState)({show:!1,msg:"Loading..."}),t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){var e=[v.loading$.subscribe((function(e){a({show:e.show,msg:e.msg})}))];return function(){e.map((function(e){return e.unsubscribe()}))}}),[]),c.a.createElement(l.D,{isOpen:n.show,message:n.msg})},y=n(22),g=function(){return c.a.createElement(l.I,null,c.a.createElement(l.r,null,c.a.createElement(l.S,null,c.a.createElement(l.R,null,"User Page"))),c.a.createElement(l.m,null,c.a.createElement(l.A,null,"User")))},k=n(2),x=n.n(k),E=n(5),w=n(105),j=n(4),O=n(17),_=n(16),S=n(13),A=n(18),D=(String.fromCharCode(65535),function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.a)(this,e),this.id=void 0,this.name="",this.deleted=void 0,this.created=Date.now(),this.updated=Date.now(),this.creator=void 0,this.type="doc",this.dirty=0,this.rev=1,Object.assign(this,t)}),C=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,t),(e=Object(O.a)(this,Object(_.a)(t).call(this))).id=void 0,e.name="",e.note=void 0,e.access=[],Object.assign(Object(S.a)(e),n),e.id=n.id,e.id||(e.id=""),e}return Object(A.a)(t,e),t}(D);!function(e){e[e.finished=0]="finished",e[e.current=1]="current",e[e.future=2]="future",e[e.resting=3]="resting"}(a||(a={})),function(e){e.day="day",e.week="week",e.month="month"}(r||(r={})),function(e){e[e.trivial=0]="trivial",e[e.easy=1]="easy",e[e.medium=2]="medium",e[e.hard=3]="hard",e[e.extreme=4]="extreme"}(s||(s={}));var T=function(e){switch(e){case s.trivial:return"trivial";case s.easy:return"easy";case s.medium:return"medium";case s.hard:return"hard";case s.extreme:return"extreme"}},P=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,t),(e=Object(O.a)(this,Object(_.a)(t).call(this))).name="New habit",e.note=void 0,e.type="hab",e.stage=a.current,e.difficulty=s.medium,e.regularityInterval=r.day,e.regularityValue=1,e.regularityEachDayGoal=1,e.progress=[],e.currentStreak=0,e.bestStreak=0,e.newRewards=void 0,Object.assign(Object(S.a)(e),n),e}return Object(A.a)(t,e),t}(D),I=n(14),R=n.n(I),M=n(9),F=n.n(M);F.a.level=F.a.TRACE;var G="production"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_STAGE?{SYNC_SERVER:"https://auth.mlflabs.com",AUTH_API_URL:"https://auth.mlflabs.com"}:{},B=Object(j.a)({},{APP_ID:"hv",ACCESS_META_KEY:"access",SERVER_ACCESS_META_KEY:"ch",MOMENT_DATE_FORMAT:"YYYYMMDD",TOKEN_EXPIRATION:300,SYNC_SERVER:"http://localhost:3002",AUTH_API_URL:"http://localhost:3002"},{},G),N=n(39),L=F()("utils"),V=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},U=function(e){try{var t=R()(e);return R()().diff(t,"d")<3?t.fromNow():t.format("DD-MM-YYYY")}catch(n){L.error(n)}};function Y(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return n.reduce((function(e,t){return e&&e[t]}),e)}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=q(e[n],t,n);return-1===a&&(a=t.length),[].concat(Object(N.a)(t.slice(0,a)),[Object.assign({},e)],Object(N.a)(t.slice(a+1)))}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";if(e.deleted)return t.filter((function(t){return t[n]!==e[n]}));var a=q(e[n],t,n);return-1===a&&(a=t.length),[].concat(Object(N.a)(t.slice(0,a)),[Object.assign({},e)],Object(N.a)(t.slice(a+1)))}function q(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=0;a<t.length;a++)if(e===t[a][n])return a;return-1}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e>t?t:e<n?n:e}F()("utils");var z=function(e){return Object(j.a)({},{gold:0,experience:0,item:void 0},{},e)},K=function(e,t,n){var a=R()().day("Monday"),r=0;a.isSame(R()(),"day")||a.add(1,"week"),a.subtract(t,"week");for(var s=0;s<7;s++)te(ae(a,s),e)>0&&r++;return r},J=function(e,t){var n=R()().date(1);n.isSame(R()(),"day")||n.add(1,"month");var a=0;n.subtract(t,"month");for(var r=R()(n);r.isSame(n,"month");)te(r.format("YYYYMMDD"),e)>0&&a++,r.add(1,"day");return a},Q=function(e,t){if(0===t)return!0;var n=R()().day("Monday");return n.isSame(R()(),"day")||n.add(1,"week"),n.subtract(t,"week"),!!n.isAfter(R()().subtract(e,"day"))},X=function(e,t){for(var n=0,a=0,r=!0,s=0,i=0;r;)(n+=W(i=J(e,s),e.regularityValue))>a&&(a=n),i<e.regularityValue&&!Q(t,s)&&(r=!1),s++;var c=e.bestStreak;return e.bestStreak||(e.bestStreak=0),a>e.bestStreak&&(c=a),Object(j.a)({},e,{currentStreak:n,bestStreak:c})},Z=function(e,t){for(var n=0,a=0,r=!0,s=0,i=0;r;)(n+=W(i=K(e,s),e.regularityValue))>a&&(a=n),i>=e.regularityValue||Q(t,s)||(r=!1),s++;var c=e.bestStreak;return e.bestStreak||(e.bestStreak=0),a>e.bestStreak&&(c=a),Object(j.a)({},e,{currentStreak:n,bestStreak:c})},ee=function(e,t){for(var n=0,a=0,r=!0,s=0;r;)te(ne(s),e)>0?++n>a&&(a=n):r=!1,s++;var i=e.bestStreak;return e.bestStreak||(e.bestStreak=0),a>e.bestStreak&&(i=a),Object(j.a)({},e,{currentStreak:n,bestStreak:i})},te=function(e,t){t.progress||(t.progress=[]);for(var n=0;n<t.progress.length;n++)if(t.progress[n].date===e)return t.progress[n].value;return 0},ne=function(e){return R()().subtract(e,"day").format("YYYYMMDD")},ae=function(e,t){return R()(e).subtract(t,"d").format("YYYYMMDD")},re=n(19),se=n(151),ie=n.n(se);function ce(e){return"u"+B.APP_ID+e}function oe(e){var t="u"+B.APP_ID+e;return Object(re.a)({id:me(t,""),rev:1,name:"default",access:[],type:"set",updated:0},B.ACCESS_META_KEY,ve(e))}function ue(){for(var e,t=!1;!t;)"_"!==(e=ie.a.generate()).substring(0,1)&&"-"!==e.substring(0,1)&&(t=!0);return e}function le(e){if(void 0===e)throw new Error("Id can not be undefined");var t="ch".length+".".length;return e.substring(0,e.length-t)}function de(e){return le(e)}function me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B.APP_ID;return t+e+".ch"}function he(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ue();if(n=n.replace(".",""),void 0===e)throw new Error("Project can't be underfined");var a="ch".length;return e.substring(0,e.length-a)+t+"."+n}var fe=function(e){return new Promise((function(t){setTimeout(t,e)}))};function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=be(e[n],t,n);return-1===a&&(a=t.length),[].concat(Object(N.a)(t.slice(0,a)),[Object.assign({},e)],Object(N.a)(t.slice(a+1)))}function ve(e){return["u"+B.APP_ID+e]}function be(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=0;a<t.length;a++)if(e===t[a][n])return a;return-1}var ye=function(e,t){var n=function(e){if(void 0===e)throw new Error("Id cannot be undefined");return e.split(".")[0]}(e);return t[B.ACCESS_META_KEY][n]},ge=function(e){return"1"===e.substring(0,1)||"2"===e.substring(1,2)},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tasks",t=arguments.length>1?arguments[1]:void 0,n=le(t);return new xe({id:void 0,folder:void 0,type:"todolist",icon:"check",secondaryType:"todolist",name:e,fullname:n+e})},xe=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,t),(e=Object(O.a)(this,Object(_.a)(t).call(this))).folder="base",e.type="todolist",e.project=void 0,e.icon=void 0,e.color=void 0,e._new=void 0,e.fullname=void 0,e.secondaryType="todolist",Object.assign(Object(S.a)(e),n),e.fullname=n.fullname,e}return Object(A.a)(t,e),t}(D),Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tasks",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"check",a=le(t);return new we({id:void 0,type:"todoTag",icon:n,name:e,fullname:a+e})},we=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,t),(e=Object(O.a)(this,Object(_.a)(t).call(this))).type="todoTag",e.icon=void 0,e.animatedIcon=void 0,e.color=void 0,e._new=void 0,e.fullname=void 0,Object.assign(Object(S.a)(e),n),e}return Object(A.a)(t,e),t}(D),je=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,t),(e=Object(O.a)(this,Object(_.a)(t).call(this))).note=void 0,e.type="todo",e.done=void 0,e.date=void 0,e.list="default",e.tags=void 0,e._new=void 0,e.parent=void 0,e.subTodos=void 0,e.showSubTodos=void 0,e.showDone=void 0,e.newRewards=void 0,e.doneRewards=void 0,e.done=!1,e.date=null,e.tags=[],e.parent=null,e.subTodos=[],e.showSubTodos=!1,e.showDone=!1,e.newRewards=z(),e.doneRewards=z(),Object.assign(Object(S.a)(e),n),e}return Object(A.a)(t,e),t}(D),Oe=n(75),_e=n.n(Oe),Se=(n(243),function(e){return new Promise((function(t){setTimeout(t,e)}))});var Ae,De,Ce,Te=function(e){var t=e.iconsvg,n=e.actionFunc,a=Object(i.useState)({isStopped:!0,isPaused:!0}),r=Object(m.a)(a,2),s=r[0],o=r[1],u={loop:!0,autoplay:!1,render:"svg",animationData:t,rendererSettings:{clearCanvas:!0,scaleMode:"noScale",preserveAspectRatio:"xMidYMid slice"}},l=function(){var e=Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({isStopped:!1,isPaused:!1}),e.next=3,Se(1e3);case 3:n(),o({isStopped:!0,isPaused:!0});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{onClick:function(){return l()},className:"animatedfunction"},c.a.createElement(_e.a,{options:u,height:25,width:25,isStopped:s.isPaused,isPaused:s.isStopped}))},Pe=n(159),Ie=n(427),Re=n(154),Me=n(423),Fe=n(23),Ge=n.n(Fe),Be=n(152),Ne=F()("dexie"),Le=function(){function e(t){Object(h.a)(this,e),this.db=void 0,this._ready=!1,this.ready$=new p.a(this._ready),this._subscriptions=[],this.changes$=new Pe.a,this.db=new Be.a(B.APP_ID+t.name+"_dexie");var n={};t.tables.forEach((function(e){n[e.name]=e.columns})),this.db.version(t.version).stores(n),this._init()}return Object(f.a)(e,[{key:"_init",value:function(){var e=Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.db.open();case 3:this._ready=!0,this.ready$.next(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Ne.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"destroy",value:function(){var e=Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._subscriptions.forEach((function(e){e&&e.unsubscribe()}));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDoc",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db[n].get({id:t});case 2:if(!(a=e.sent)){e.next=5;break}return e.abrupt("return",a);case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBulk",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db[n].bulkGet(t);case 2:return a=e.sent,e.abrupt("return",a.filter((function(e){return void 0!==e})));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"queryByProperty",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n,a,r){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next="equals"===e.t0?3:"startsWith"===e.t0?7:"notEqual"===e.t0?10:13;break;case 3:return e.next=5,this.db[r].where(t).equals(a).toArray();case 5:return s=e.sent,e.abrupt("return",s);case 7:return e.next=9,this.db[r].where(t).startsWith(a).toArray();case 9:return e.abrupt("return",e.sent);case 10:return e.next=12,this.db[r].where(t).notEqual(a).toArray();case 12:return e.abrupt("return",e.sent);case 13:throw new Error("Missing proper operator, given: "+n);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"getProjectItems",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db[n].where("id").startsWith(t).toArray();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(!(a.length>2&&void 0!==a[2])||a[2])&&(t.dirty=1),e.next=4,this.db[n].put(t);case 4:if(!e.sent){e.next=8;break}return this.changes$.next({doc:t}),e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveFromSync",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db[n].bulkPut(t);case 2:if(!e.sent){e.next=6;break}return t.forEach((function(e){a.changes$.next({doc:e})})),e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();!function(e){e.finished="finished",e.current="current",e.future="future",e.waiting="waiting",e.resting="resting"}(Ae||(Ae={})),function(e){e[e.trivial=0]="trivial",e[e.easy=1]="easy",e[e.medium=2]="medium",e[e.hard=3]="hard",e[e.extreme=4]="extreme"}(De||(De={})),function(e){e.day="day",e.week="week",e.month="month"}(Ce||(Ce={}));var Ve,Ue=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,t),(e=Object(O.a)(this,Object(_.a)(t).call(this))).type="party",e.secondaryType="project",e.creator="",e.dirty=0,e.members=[],e.moneyTypeSingle="Ruby",e.moneyTypeMultiple="Rubies",e.moneyColor="#ff0000",Object.assign(Object(S.a)(e),n),e}return Object(A.a)(t,e),t}(C),Ye=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)(this,t),(e=Object(O.a)(this,Object(_.a)(t).call(this))).name="New Challenge",e.note=void 0,e.type="party",e.access="",e.secondaryType="challenge",e.state=Ae.waiting,e.difficulty=De.medium,e.regularityInterval=Ce.day,e.regularityIntervalGoal=1,e.regularityEachDayGoal=1,e.members=[],Object.assign(Object(S.a)(e),n),e}return Object(A.a)(t,e),t}(D),He=new(function(){function e(){Object(h.a)(this,e)}return Object(f.a)(e,[{key:"getItem",value:function(){var e=Object(E.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",localStorage.getItem(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getString",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem(t)||"",e.abrupt("return",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getObject",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=localStorage.getItem(t)){e.next=3;break}return e.abrupt("return",null);case 3:return e.abrupt("return",JSON.parse(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setObject",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=JSON.stringify(n),e.next=4,localStorage.setItem(t,a);case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setString",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem(t,n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),$e=n(153),qe=n.n($e),We=F()("ajax"),ze=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{success:e,data:t,status:n,errors:a}},Ke=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{url:e,type:"post",form:t,options:n}},Je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Server";return{msg:e,location:t}},Qe=function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a,r,s,i=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(i.length>1&&void 0!==i[1])||i[1],a=i.length>2&&void 0!==i[2]?i[2]:"Loading...",e.prev=2,n&&v.showLoading(a),e.next=6,qe.a.post(t.url,t.form,t.options);case 6:return r=e.sent,v.hideLoading(),We.info(r),e.abrupt("return",ze(!0,r.data,200));case 12:if(e.prev=12,e.t0=e.catch(2),v.hideLoading(),(s=Y(e.t0,"response"))&&s.status){e.next=20;break}return e.abrupt("return",ze(!1,null,503,[Je("Service is temporarly unavailable")]));case 20:if(422!==s.status){e.next=24;break}return e.abrupt("return",ze(!1,null,s.data.status,s.data.errors));case 24:if(404!==s.status){e.next=28;break}return e.abrupt("return",ze(!1,null,404,[Je("Could not connect to server")]));case 28:return e.abrupt("return",ze(!1,null,s.status,[Je("Could not connect to server")]));case 29:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}(),Xe=n(38);!function(e){e.default="default",e.info="info",e.success="success",e.warning="warning",e.error="error"}(Ve||(Ve={}));var Ze,et=new(function(){function e(){Object(h.a)(this,e),this.messages$=new Pe.a}return Object(f.a)(e,[{key:"showMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ve.default,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;Object(Xe.b)(e,{type:t,autoClose:n})}},{key:"printSimpleError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;Object(Xe.b)(e,{type:Ve.error,autoClose:t})}},{key:"printServerErrors",value:function(e){var t=this,n=e.errors||[];n.length>0&&n.forEach((function(e){return t.showMessage(e.msg,Ve.error)}))}}]),e}()),tt=F()("auth");!function(e){e[e.Loading=0]="Loading",e[e.Guest=1]="Guest",e[e.User=2]="User"}(Ze||(Ze={}));var nt=function(e){return null==e?{id:"guest",username:"Guest",email:null,token:null,token_expiery:null,access:[]}:{id:e.id||"guest",username:e.username||"Guest",email:e.email||null,token:e.token||null,token_expiery:e.token_expiery||e.expires||null,access:e.access||[]}},at=function(e){return"Guest"===e.username};function rt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Guest";return nt({username:e})}var st=new(function(){function e(){Object(h.a)(this,e),this._user=rt("null"),this._authStatus=Ze.Loading,this.authStatus$=new p.a(this._authStatus),this.username$=new Pe.a,this.loadAuth()}return Object(f.a)(e,[{key:"getIsAuthenticated",value:function(){return this._authStatus===Ze.User}},{key:"getUsername",value:function(){return this._user.username}},{key:"getEmail",value:function(){return this._user.email}},{key:"getUser",value:function(){return this._user}},{key:"updateUser",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],tt.info("Update User:: ",t),at(t)&&"null"!==this._user.username){e.next=15;break}if(this._authStatus!==Ze.User&&this.setAuthStatus(Ze.User),t.username===this._user.username){e.next=9;break}return this._user=t,e.next=8,He.setObject("auth-user-key",t);case 8:this.username$.next(t.username);case 9:if(Object(Fe.isEqual)(this._user,t)){e.next=14;break}return tt.info("New user object, save it",t),this._user=t,e.next=14,He.setObject("auth-user-key",t);case 14:return e.abrupt("return");case 15:if(this._authStatus===Ze.Guest){e.next=20;break}if(this.setAuthStatus(Ze.Guest),!n){e.next=20;break}return e.next=20,He.setObject("auth-user-key",rt);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadAuth",value:function(){var e=Object(E.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=nt,e.next=4,He.getObject("auth-user-key");case 4:if(e.t1=e.sent,t=(0,e.t0)(e.t1),tt.info("LOADED USER",t),t.token&&t.token_expiery){e.next=9;break}return e.abrupt("return",this.updateUser(rt()));case 9:if(!I.unix(t.token_expiery).isAfter(I.now())){e.next=14;break}return e.abrupt("return",this.updateUser(t));case 14:return tt.warn("TOKEN is old"),e.abrupt("return",this.updateUser(rt()));case 16:e.next=22;break;case 18:return e.prev=18,e.t2=e.catch(0),tt.error(e.t2),e.abrupt("return",this.updateUser(rt()));case 22:case"end":return e.stop()}}),e,this,[[0,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"loginAndRedirect",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n,a,r){var s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(Ke(B.AUTH_API_URL+"/auth/login",{id:t,password:n,app:B.APP_ID}),!0,"Login in, please wait");case 2:(s=e.sent).success?(this.updateUser(nt(s.data)),r&&r.state&&r.state.prev&&(i=r.state.prev.startsWith("/auth/")?"/":r.state.prev),a.push(i||"/")):et.printServerErrors(s);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(Ke(B.AUTH_API_URL+"/auth/login",{username:t,password:n,app:B.APP_ID},{}),!0,"Login in, please wait");case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"renewToken",value:function(){var e=Object(E.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(Ke(B.AUTH_API_URL+"/auth/renewToken",{token:this._user.token}),!1);case 2:if(t=e.sent,tt.info("Renewed Token: ",t),!t.success){e.next=10;break}return e.next=7,this.updateUser(Object(j.a)({},this._user,{},(n={token:t.data.token},Object(re.a)(n,B.ACCESS_META_KEY,t.data[B.SERVER_ACCESS_META_KEY]),Object(re.a)(n,"token_expiery",t.data.expires),n)));case 7:return e.abrupt("return",!0);case 10:if(!t.status||422!==t.status){e.next=14;break}return e.next=13,this.updateUser(rt());case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n,a){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(Ke(B.AUTH_API_URL+"/auth/register",{username:t,password:a,email:n}),!0,"Registering, please wait");case 2:if(!(r=e.sent).success){e.next=7;break}return e.abrupt("return",!0);case 7:return et.printServerErrors(r),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"forgotPassword",value:function(){var e=Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setAuthStatus",value:function(e){this._authStatus=e,this.authStatus$.next(e)}},{key:"getAuthStatus",value:function(){return this._authStatus}},{key:"getToken",value:function(){return this._user.token||""}},{key:"userid",get:function(){return this._user.id||""}}]),e}()),it=F()("sync"),ct=function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},t.forEach((function(e){a=e.id.split(".")[0],n[a]||(n[a]=[]),n[a].push(Object(j.a)({},{},{},e))})),e.next=4,He.getObject("channel_checkpoints");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return r=e.t0,e.abrupt("return",{channels:n,checkpoints:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ot=function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ct(t.data);case 3:return n=e.sent,e.next=6,Qe(Ke(t.syncurl+"/sync/sync",{token:t.token,checkpoint:t.checkpoint,data:n}),!1,"");case 6:if(!(a=e.sent)){e.next=17;break}return e.next=10,He.getObject("channel_checkpoints");case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0={};case 13:return r=e.t0,e.next=16,He.setObject("channel_checkpoints",Object(j.a)({},r,{},a.data.checkpoints));case 16:return e.abrupt("return",a.data.types);case 17:return e.abrupt("return",null);case 20:e.prev=20,e.t1=e.catch(0),it.error(e.t1);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}(),ut=F()("dataService"),lt={name:"guest_dx",version:20,tables:[{name:"set",columns:"id, dirty",sync:!0},{name:"party",columns:"id, dirty, party, type, secondaryType",sync:!0},{name:"todo",columns:"id, *tags, list ,dirty",sync:!0},{name:"todolist",columns:"id, dirty, folder, secondaryType, fullname",sync:!0},{name:"todoTag",columns:"id, dirty",sync:!0},{name:"hab",columns:"id, dirty",sync:!0},{name:"msg",columns:"id, messageType, dirty",sync:!0},{name:"social",columns:"id, name, dirty, secondaryType",sync:!0}]},dt=new(function(){function e(){var t=this;Object(h.a)(this,e),this.db=void 0,this.authId="",this._ready=!1,this._ready$=new p.a(this._ready),this.addSyncCall$=new Pe.a,this.addSyncCall$.pipe(Object(Ie.a)(5e3)).subscribe((function(){ut.info("Syncing......."),t._syncRemote()}))}return Object(f.a)(e,[{key:"getDoc",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}throw new Error("Doc Id cannot be undefined, check logic.");case 2:return e.next=4,this.db.getDoc(t,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBulk",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.getBulk(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"queryByProperty",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n,a,r){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.queryByProperty(t,n,a,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"getAllByProject",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.getProjectItems(le(t)+".",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllByChannel",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.getProjectItems(t+".",n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveFromServer",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.save(t,n,!1);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a,r,s,i=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>2&&void 0!==i[2]?i[2]:{},ut.info("SAVING DOC",t,a,n),a||(a={remoteSync:!0}),void 0===a.remoteSync&&(a.remoteSync=!0),e.prev=4,r={},!t.id||null!=a.oldDoc){e.next=10;break}return e.next=9,this.getDoc(t.id,n);case 9:r=e.sent;case 10:if(!Ge.a.isEqual(r,t)){e.next=12;break}return e.abrupt("return",!1);case 12:if(t.id){e.next=17;break}if(a.projectid){e.next=15;break}throw new Error("Saving new doc requires valid props.project");case 15:t.id=he(a.projectid,n),t.created=Date.now();case 17:return t.dirty=!0,t.rev||(t.rev=1),t.rev++,e.next=22,this.db.save(t,n);case 22:if(s=e.sent,a.remoteSync&&this.addSyncCall$.next(),!s.ok){e.next=28;break}return e.abrupt("return",s);case 28:return e.abrupt("return",!1);case 29:e.next=35;break;case 31:return e.prev=31,e.t0=e.catch(4),ut.error("DEXIE error: ",e.t0),e.abrupt("return",!1);case 35:case"end":return e.stop()}}),e,this,[[4,31]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveNewProject",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a,r,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe(Ke(B.AUTH_API_URL+"/channels/addNewChannel",{token:st.getToken(),doc:t,name:t.name},{}),!1);case 2:if(a=e.sent,ut.info("Making new project, ajax result: ",a),a.success){e.next=6;break}return e.abrupt("return",a);case 6:r=a.data.channel,s=!1;case 8:if(s){e.next=18;break}if(!st.getUser()[B.ACCESS_META_KEY][r]){e.next=14;break}s=!0,e.next=16;break;case 14:return e.next=16,fe(2e3);case 16:e.next=8;break;case 18:return e.next=20,this.db.save(a.data.doc,n,!1);case 20:return e.abrupt("return",e.sent);case 21:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveSystemDoc",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n,a){var r,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={},t.type){e.next=3;break}throw new Error("Saving system doc requires doc to have type property");case 3:return t.secondaryType&&(r.secondaryType=t.secondaryType),e.next=6,Qe(Ke(B.AUTH_API_URL+"/channels/addNewSystemDoc",Object(j.a)({},{token:st.getToken(),doctype:t.type,channelname:de(n.id),doc:t},{},r),{}),!1);case 6:if((s=e.sent).success){e.next=9;break}return e.abrupt("return",s);case 9:return e.next=11,this.db.save(s.data.doc,a,!1);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a,r,s,i=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(i.length>2&&void 0!==i[2])||i[2],e.prev=1,e.next=4,this.getDoc(t,n);case 4:if(r=e.sent){e.next=7;break}return e.abrupt("return",!1);case 7:return ut.warn("Deleting doc: ",t),ut.warn(r),s=this.db.save(Object(j.a)({},r,{},{deleted:!0}),n),ut.info(s),a&&this.addSyncCall$.next(),e.abrupt("return",s);case 15:return e.prev=15,e.t0=e.catch(1),ut.error(e.t0),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeProject",value:function(){var e=Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"subscribeChanges",value:function(){return this.db.changes$.asObservable().pipe(Object(Re.a)((function(e){return e.doc})))}},{key:"subscribeDocChanges",value:function(e){return this.db.changes$.asObservable().pipe(Object(Me.a)((function(t){return t.doc.id===e})),Object(Re.a)((function(e){return e.doc})))}},{key:"subscribeByPropertyChange",value:function(e,t){return this.db.changes$.asObservable().pipe(Object(Me.a)((function(n){return n.doc[e]===t})),Object(Re.a)((function(e){return e.doc})))}},{key:"subscribeProjectTypeChanges",value:function(e,t){if(void 0===e)throw new Error("Project id, can not be undefined, can not subscribe to id");var n=le(e);return this.db.changes$.asObservable().pipe(Object(Me.a)((function(e){return e.doc.id.startsWith(n+"."+t+".")})),Object(Re.a)((function(e){return e.doc})))}},{key:"subscribeChannelTypeChanges",value:function(e,t){if(void 0===e)throw new Error("Channel can not be undefined, can not subscribe to id");return this.db.changes$.asObservable().pipe(Object(Me.a)((function(n){return n.doc.id.startsWith(e+"."+t+".")})),Object(Re.a)((function(e){return e.doc})))}},{key:"getReadySub",value:function(){return this._ready$}},{key:"init",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a,r,s=this,i=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!(i.length>1&&void 0!==i[1])||i[1],ut.info("Init DB"),(a=lt).name=t,this.db=new Le(a),r=this.db.ready$.subscribe((function(e){ut.info("Dexie Sub: ",e),e&&(s.ready=!0,n&&s.addSyncCall$.next(),r.unsubscribe())}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_syncRemote",value:function(){var e=Object(E.a)(x.a.mark((function e(){var t,n,a,r,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Number,e.next=3,He.getItem("SYNC_CHECKPOINT");case 3:e.t1=e.sent,(0,e.t0)(e.t1)||0,t=[],n=0;case 8:if(!(n<lt.tables.length)){e.next=18;break}if(lt.tables[n].sync){e.next=11;break}return e.abrupt("continue",15);case 11:return e.next=13,this.db.queryByProperty("dirty","equals",1,lt.tables[n].name);case 13:a=e.sent,t.push.apply(t,Object(N.a)(a));case 15:n++,e.next=8;break;case 18:return e.next=20,ot({data:t,syncurl:B.SYNC_SERVER,token:st.getToken(),checkpoint:0,requestMaxSize:1e3});case 20:if(!(r=e.sent)){e.next=30;break}s=Object.keys(r),i=0;case 24:if(!(i<s.length)){e.next=30;break}return e.next=27,this.db.saveFromSync(r[s[i]].map((function(e){return Object.assign(e,{dirty:0})})),s[i]);case 27:i++,e.next=24;break;case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ready",get:function(){return this._ready},set:function(e){this._ready=e,e&&this._ready$.next(e)}}]),e}()),mt=function(e){for(var t=0,n=1;n<e;n++)t+=Math.floor((n+100)*Math.pow(2,n/7));return Math.floor(t/4)},ht=function(e){var t=0;e.date&&(t=R()(e.date).diff(R()(),"hour"));var n=vt+.2*t;return Math.floor(n)},ft=function(e){var t=0;e.date&&(t=R()(e.date).diff(R()(),"hour"));var n=bt+.1*t;return Math.floor(n)},pt=F()("gamify"),vt=3,bt=5,yt=new(function(){function e(){var t=this;Object(h.a)(this,e),this._userId="",this._subscriptions=[],this._state={health:50,maxHealth:50,experience:0,maxExperience:20,level:1,gold:0,items:[]},this.state$=new p.a(this._state),this.calculateFinishedTodoRewards=function(e){return e.doneRewards&&e.doneRewards.gold||(e.newRewards=z({gold:ht(e),experience:ft(e),item:null})),e.done?(t.addGold(e.newRewards.gold),t.messageReceivedGold(e.newRewards.gold),t.addExperience(e.newRewards.experience),t.messageReceivedExperience(e.newRewards.experience)):(t.addGold(-1*e.newRewards.gold),t.messageLostGold(e.newRewards.gold),t.addExperience(-1*e.newRewards.experience),t.messageLostExperience(e.newRewards.experience)),Object(j.a)({},{},{},e)},this.calculateNewTodo=function(e){return e.newRewards=z({gold:1,experience:2,item:null}),t.addGold(e.newRewards.gold),t.messageReceivedGold(e.newRewards.gold),t.addExperience(e.newRewards.experience),t.messageReceivedExperience(e.newRewards.experience),Object(j.a)({},{},{},e)},this.calculateNewHabitRewards=function(e){return e.newRewards=z({gold:5,experience:5,item:null}),t.addGold(e.newRewards.gold),t.messageReceivedGold(e.newRewards.gold),t.addExperience(e.newRewards.experience),t.messageReceivedExperience(e.newRewards.experience),Object(j.a)({},{},{},e)}}return Object(f.a)(e,[{key:"init",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.unsubscribe(),this._userId=t,n=dt.getReadySub().subscribe(function(){var e=Object(E.a)(x.a.mark((function e(r){var s,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a.loadInitDocs(t);case 4:s=e.sent,i=a.state$.pipe(Object(Ie.a)(1e4)).subscribe((function(){a._save()})),c=dt.subscribeDocChanges(a.getGamifyDocId()).subscribe((function(e){Object(Fe.isEqual)(a._state,e.state)||(a.state=e.state)})),a._subscriptions.push(i),a._subscriptions.push(c),s&&(a.state=s.state),n.unsubscribe();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){this._subscriptions.forEach((function(e){e&&e.unsubscribe()}))}},{key:"addGold",value:function(e){this.state=Object(j.a)({},this._state,{},{gold:this._state.gold+e})}},{key:"addExperience",value:function(e){var t=this._state.experience+e;t>this._state.maxExperience&&(t=-1*(this._state.maxExperience-t),this._state=Object(j.a)({},this._state,{},{maxExperience:mt(this._state.level+1),level:this._state.level+1})),this.state=Object(j.a)({},this._state,{},{experience:t})}},{key:"calculateHabitProgressRewards",value:function(e,t){e.regularityEachDayGoal||(e.regularityEachDayGoal=1);var n=Object.assign(t);if(!t.reward){n.reward=z();for(var a=5,r=3,s=0;s<e.currentStreak;s++)a+=.2*a,r+=.2*r;n.reward.gold=Math.round(a),n.reward.experience=Math.round(r),e.progress=H(n,e.progress,"date")}return n.value>=e.regularityEachDayGoal?(n.reward&&n.reward.gold&&(this.messageReceivedGold(n.reward.gold),this.addGold(n.reward.gold)),n.reward&&n.reward.experience&&(this.messageReceivedExperience(n.reward.experience),this.addExperience(n.reward.experience))):(n.reward&&n.reward.gold&&(this.messageLostGold(n.reward.gold),this.addGold(-1*n.reward.gold)),n.reward&&n.reward.experience&&(this.messageLostExperience(-1*n.reward.experience),this.addExperience(-1*n.reward.experience))),e}},{key:"messageReceivedGold",value:function(e,t,n){t||(t=""),n||(n=""),Xe.b.success(t+" You have received "+e+" gold "+n,{autoClose:3e3})}},{key:"messageLostGold",value:function(e,t,n){t||(t=""),n||(n=""),Xe.b.error(t+" You have lost "+e+" gold"+n,{autoClose:3e3})}},{key:"messageReceivedExperience",value:function(e,t,n){t||(t=""),n||(n=""),Xe.b.success(t+" You have received "+e+" experience"+n,{autoClose:3e3})}},{key:"messageLostExperience",value:function(e,t,n){t||(t=""),n||(n=""),Xe.b.error(t+" You have lost "+e+" experience"+n,{autoClose:3e3})}},{key:"_save",value:function(){var e=Object(E.a)(x.a.mark((function e(){var t,n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt.getDoc(this.getGamifyDocId(),"set");case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return");case 6:n=Object(Fe.isEqual)(this._state,t.state),a=Object(Fe.isEqual)(this.state,{health:50,maxHealth:50,experience:0,maxExperience:20,level:1,gold:0,items:[]}),n||a||t.userid!==this._userId||dt.save(Object(j.a)({},t,{},{state:this._state}),"set"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),pt.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getGamifyDocId",value:function(){var e=he(oe(st.userid).id,"gamify","");return e.substring(0,e.length-1)}},{key:"loadInitDocs",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a,r,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt.getDoc(this.getGamifyDocId(),"set");case 3:if(!(n=e.sent)){e.next=6;break}return e.abrupt("return",n);case 6:if(a=Date.now(),t!==this._userId){e.next=12;break}return e.next=10,dt.save((r={id:this.getGamifyDocId(),state:{health:50,maxHealth:50,experience:0,maxExperience:20,level:1,gold:0,items:[]},type:"set"},Object(re.a)(r,B.ACCESS_META_KEY,ve(t)),Object(re.a)(r,"userid",t),Object(re.a)(r,"created",a),Object(re.a)(r,"updated",a),r),"set");case 10:return s=e.sent,e.abrupt("return",s);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),pt.error(e.t0.red,t);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this.state$.next(e)}}]),e}()),gt=F()("todo"),kt=function(){function e(){Object(h.a)(this,e),this._projectid=void 0,this._state={selectedTodo:null,list:void 0,tag:void 0,docs:[],tagDocs:[],doneTodos:!1},this.state$=new p.a(this._state),this._subscription=[]}return Object(f.a)(e,[{key:"init",value:function(e,t,n){var a=this;gt.warn(e,t,n),this.unsubscribe();var r=dt.getReadySub().subscribe(function(){var s=Object(E.a)(x.a.mark((function s(i){return x.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(i){s.next=2;break}return s.abrupt("return");case 2:return a._init(e,t,n),s.next=5,fe(1e3);case 5:r.unsubscribe();case 6:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}())}},{key:"_init",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n,a){var r,s,i,c,o,u=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._projectid!==t||(null===(r=this._state.list)||void 0===r?void 0:r.fullname)!==n||(null===(s=this._state.tag)||void 0===s?void 0:s.fullname)!==a){e.next=2;break}return e.abrupt("return");case 2:n||a||(i=ke("default",t)),n&&(i=ke(n,t)),a&&(c=Ee(a,t)),this._state=Object(j.a)({},this.state,{},{tag:c,list:i,tagDocs:this.getTags(t)}),gt.warn(this._state),this._projectid=t,gt.info(this.state),this.reloadTodos(),o=dt.subscribeProjectTypeChanges(t,"todo").subscribe((function(e){gt.log("TodoService subscription: ",e),u.reloadTodos()})),this._subscription.push(o);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"reloadTodos",value:function(){var e=Object(E.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gt.info("RELOADING TODOS::: ",this.state),!this.state.list){e.next=8;break}return gt.info("Todo Query by List"),e.next=5,dt.queryByProperty("list","equals",this.state.list.fullname,"todo");case 5:t=e.sent,e.next=13;break;case 8:if(!this.state.tag){e.next=13;break}return gt.info("Todo Query by Tags"),e.next=12,dt.queryByProperty("tags","equals",this.state.tag.fullname,"todo");case 12:t=e.sent;case 13:this.filterAndSaveTodos(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTagsByStartingName",value:function(){var e=Object(E.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.queryByProperty("tags","startsWith",t,"todo");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterAndSaveTodos",value:function(e){var t=this,n=e.filter((function(e){return t.filterDoneParentFunction(e)}));return this.state=Object(j.a)({},this.state,{},{docs:n}),n}},{key:"filterDoneParentFunction",value:function(e){return e.done===this._state.doneTodos}},{key:"addSubTodoToParent",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt.getDoc(n,"todo");case 3:(a=e.sent)&&(a.subTodos||(a.subTodos=[]),a.subTodos=Ge.a.concat(a.subTodos,t),this.save(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),gt.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"removeSubTodoFromParent",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt.getDoc(n,"todo");case 3:(a=e.sent)&&(a.subTodos||(a.subTodos=[]),a.subTodos=Ge.a.filter(a.subTodos,(function(e){return e!==t})),this.save(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),gt.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a,r=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:null,gt.info("Save: ",t,this._projectid,"todo"),t._new&&(delete t._new,t.tags=[],this.state.list?t.list=this.state.list.fullname:t.list=le(this._projectid)+"default",t.tags||(t.tags=[]),this.state.tag&&t.tags.push(this.state.tag.fullname),t=yt.calculateNewTodo(t)),e.next=5,dt.save(Object(j.a)({},{done:!1},{},t),"todo",{projectid:this._projectid});case 5:return a=e.sent,n&&t.id&&this.addSubTodoToParent(t.id,n),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveList",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gt.info("Save New TodoList: ",t),!t._new){e.next=15;break}return e.next=4,dt.getDoc(t.id,"todolist");case 4:if(!e.sent){e.next=8;break}return et.printSimpleError("List Already Exists"),e.abrupt("return");case 8:return delete t._new,e.next=12,dt.save(t,"todolist");case 12:return n=e.sent,gt.info(n),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteList",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return gt.warn(t),e.next=3,dt.queryByProperty("list","equals",t.fullname,"todo");case 3:for(n=e.sent,gt.warn(n),a=0;a<n.length;a++)dt.remove(n[a].id,"todo");t.id&&dt.remove(t.id,"todolist");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dt.getDoc(t,"todo");case 3:(n=e.sent)&&n.parent&&this.removeSubTodoFromParent(t,n.parent),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),gt.error(e.t0);case 10:dt.remove(t,"todo");case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"select",value:function(e){this.state=Object(j.a)({},this._state,{},{selectedTodo:e})}},{key:"changeDoneFilter",value:function(e){e!==this._state.doneTodos&&(this._state=Object(j.a)({},this._state,{},{doneTodos:e}),this.reloadTodos())}},{key:"getTags",value:function(e){return[new we({id:void 0,icon:"sun.svg",name:"today",fullname:"today"}),new we({id:void 0,icon:"star.svg",name:"important",fullname:"important"})]}},{key:"selectList",value:function(e){e!==this._state.list&&(this._state=Object(j.a)({},this._state,{},{list:e}),this.reloadTodos())}},{key:"unsubscribe",value:function(){this&&this._subscription.forEach((function(e){e&&e.unsubscribe()}))}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this.state$.next(this._state)}}]),e}(),xt=new kt,Et=n(424),wt=n(425),jt=n(426),Ot=F()("todo"),_t=function(e,t){var n=t.type,a=t.payload;switch(n){case"setTitle":return"#"===a[a.length-1]?Object(j.a)({},e,{},{title:a,showTags:!0}):" "===a[a.length-1]&&!0===e.showTags?Object(j.a)({},e,{},{title:a,showTags:!1}):Object(j.a)({},e,{},{title:a});case"setFocus":return Object(j.a)({},e,{},{focus:a});case"setCloseFocus":return console.log("setCloseFocus, ",a),Object(j.a)({},e,{},{closeFocus:a});case"setState":return a;default:return Ot.console.error("Incorrect action, ",n,a),e}},St=function(e){var t=e.list,n=e.tag,a=e.saveFunc,r=e.projectId,s=Object(i.useReducer)(_t,{title:"",focus:!1,tags:[],showTags:!1,closeFocus:!1}),o=Object(m.a)(s,2),u=o[0],d=o[1],h=Object(i.useRef)(null),f=new Pe.a,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d({type:e,payload:t})},v=function(){var e=Object(E.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("tags searching, ",t),e.next=3,xt.getTagsByStartingName(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();f.pipe(Object(Et.a)(500),Object(wt.a)(),Object(jt.a)((function(e){return v(e)}))).subscribe((function(e){console.log(e)}));var b=function(){var e=Object(E.a)(x.a.mark((function e(){var s,i,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t?t.fullname:ke("tasks",r).fullname,Ot.warn("SAVING TODO::: ",r,t),i=he(r,"todo"),c=new je({id:i,name:u.title,list:s,_new:!0}),n&&(Ot.warn("Saving a tag made manually ",n),c.tags.push(n.fullname)),Ot.warn("NEW TODO::::::::::::::: ",c),e.next=8,a(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(E.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(510);case 2:console.log("Focus",t),p("setFocus",!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se(500);case 2:console.log("CloseToolbar Focus: ",u),u.closeFocus&&p("setFocus",!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,u.showTags?c.a.createElement("div",null,"Tags"):c.a.createElement(c.a.Fragment,null),u.focus?c.a.createElement("div",null,c.a.createElement(l.f,{onClick:function(){return p("setFocus",!1)},fill:"clear"},"Close"),c.a.createElement(l.f,{onClick:function(){return function(e){switch(e){case"tag":p("setState",Object(j.a)({},u,{},{title:u.title+" #",closeFocus:!1}))}p("setCloseFocus",!1),console.log("Action: ",e,h),h&&(console.log("Setting focus to input"),h.current.setFocus())}("tag")},fill:"clear"},"Tag #")):c.a.createElement(c.a.Fragment,null),c.a.createElement(l.t,{ref:h,className:"new-todo",placeholder:"What needs to be done?",onKeyPress:function(e){"Enter"===e.key&&(b(),p("setTitle",""))},onIonChange:function(e){if(p("setTitle",e.detail.value),u.showTags){var t=e.detail.value.lastIndexOf("#");f.next(e.detail.value.substring(t))}},value:u.title,onIonBlur:function(e){g(),p("setCloseFocus",!0),console.log("Blur ",u,e)},onIonFocus:y}))},At=(n(260),n(261),n(11)),Dt=F()("todo"),Ct=function(e,t){return{todo:e,tagDocs:t,showDeleteWarrning:!1,text:Tt(e.name,e.note)}},Tt=function(e,t){return e||(e=""),e+(t=t?"\n"+t:"")},Pt=function(e){var t=e.todo,n=e.tagDocs,a=e.dataFunctions;Dt.warn("Edit Todo Render::: ",t,n,n);var r=Object(i.useState)(Ct(t,n)),s=Object(m.a)(r,2),o=s[0],u=s[1];Object(i.useEffect)((function(){u(Ct(t,n))}),[t,n]);var d=function(){u(Object(j.a)({},o,{},{showDeleteWarrning:!1}))},h=function(e){var t;Dt.error(e,n),o.todo.tags||(o.todo.tags=[]),t=void 0===o.todo.tags.find((function(t){return t===e.fullname}))?Ge.a.concat(o.todo.tags,e.fullname):Ge.a.filter(o.todo.tags,(function(t){return t!==e.fullname})),a.save(Object.assign(o.todo,{tags:t}))};return c.a.createElement("div",{className:""},c.a.createElement("div",{key:"todoEditInlineIconScrollParent",className:"todoEditInlineIconScrollParent"},n.map((function(e){return function(e){var t;return t=Ge.a.includes(o.todo.tags,e.fullname)?"success":"light",c.a.createElement(l.f,{fill:"clear",size:"default",color:t,key:e.name+"editicon",onClick:function(){return h(e)}},c.a.createElement(l.s,{src:"/assets/icons/"+e.icon}))}(e)}))),c.a.createElement(l.Q,{placeholder:"Enter todo title and note here",name:"note",class:"todoEditInlineTextArea",autoGrow:!0,onIonBlur:function(){a.save(o.todo)},onIonChange:function(e){var t=e.detail.value,n=/\r|\n/.exec(t);if(n){var a=t.substring(0,n.index),r=t.substring(n.index+1),s=Object(j.a)({},o.todo,{},{name:a,note:r}),i=Object(j.a)({},o,{},{todo:s,text:t});u(i)}else{var c=Object(j.a)({},o.todo,{},{name:t,note:""}),l=Object(j.a)({},o,{},{todo:c,text:t});u(l)}},value:o.text}),c.a.createElement("div",null,c.a.createElement("div",{className:"todoButtonsLeftAlign"},c.a.createElement(l.f,{size:"small",fill:"clear",color:"secondary",onClick:function(){a.select(null)}},c.a.createElement(l.s,{icon:At.k}),c.a.createElement(l.A,null,"Close"))),c.a.createElement("div",{className:"todoButtonsRightAlign"},c.a.createElement(l.f,{size:"small",fill:"clear",color:"danger",onClick:function(){u(Object(j.a)({},o,{},{showDeleteWarrning:!0}))}},c.a.createElement(l.s,{icon:At.I}),c.a.createElement(l.A,null,"Delete")))),c.a.createElement("div",{className:"todoInlineEditPadding"}," "),c.a.createElement(l.b,{isOpen:o.showDeleteWarrning,onDidDismiss:function(){return d},header:"Warrning!!!",message:"Are you sure you want to <strong>delete</strong> this task and its sub-tasks?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Yes Im Sure",handler:function(){return d(),void(o.todo.id&&a.remove(o.todo.id))}}]}))},It=n(155),Rt=n(156),Mt=F()("todo"),Ft=function(e,t){var n=t.type,a=t.payload;switch(n){case"updateTodo":return Object(j.a)({},e,{},{todo:a});default:return e}},Gt=function(e){var t=e.todo,n=e.tagDocs,a=e.selectedTodo,r=e.dataFunctions,s=Object(i.useReducer)(Ft,{todo:t}),o=Object(m.a)(s,2),u=o[0],d=o[1];Object(i.useEffect)((function(){h("updateTodo",t)}),[t]);var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d({type:e,payload:t})},f=function(){var e=yt.calculateFinishedTodoRewards(Object(j.a)({},u.todo,{},{done:!u.todo.done}));h("updateTodo",e),r.save(e)},p=function(){a&&u.todo.id===a.id?r.select(null):r.select(u.todo)},v=function(){if(a&&a.id===u.todo.id)return c.a.createElement(l.q,null,c.a.createElement(l.L,null,c.a.createElement(l.l,{class:"todoTitleColumn",onClick:function(){}},c.a.createElement(Pt,{todo:u.todo,tagDocs:n,dataFunctions:r}))))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.u,{button:!0,color:a&&a.id===u.todo.id?"light":"",lines:"full"},c.a.createElement(l.d,{onClick:function(){},slot:"start"},u.todo.done?c.a.createElement(Te,{iconsvg:Rt,actionFunc:f}):c.a.createElement(Te,{iconsvg:It,actionFunc:f})),c.a.createElement(l.A,{onClick:p},c.a.createElement(l.P,{color:"primary"},c.a.createElement("h2",null,u.todo.name)),u.todo.note?c.a.createElement(l.P,{color:"secondary"},c.a.createElement("p",null,u.todo.note)):c.a.createElement(c.a.Fragment,null)),u.todo.tags.sort().map((function(e){return function(e){Mt.warn(n);var t=n.find((function(t){return t.fullname===e}));return t&&t.icon?c.a.createElement(l.s,{key:t.fullname,size:"small",color:"success",src:"/assets/icons/"+t.icon}):c.a.createElement(l.s,{key:e,size:"small",color:"success",src:"/assets/icons/tag.svg"},e)}(e)}))),v())},Bt=F()("todo");n(262);var Nt,Lt=n(106),Vt=(n(263),n(264),function(e){var t=e.title,n=Object(i.useState)({health:50,maxHealth:50,experience:0,maxExperience:20,level:1,gold:0,items:[]}),a=Object(m.a)(n,2),r=a[0],s=a[1],o=r.health,u=r.maxHealth,d=r.experience,h=r.maxExperience,f=r.level,p=r.gold;return Object(i.useEffect)((function(){var e=yt.state$.subscribe((function(e){s(Object(j.a)({},r,{},e))}));return function(){e.unsubscribe()}}),[]),c.a.createElement(l.r,{className:"headerWithAvatar"},c.a.createElement("div",{className:"cityParent"},c.a.createElement("img",{src:"/assets/pics/hills.svg",style:{right:"25px"},className:"headerHills",alt:"Hills"}),c.a.createElement("img",{src:"/assets/pics/hills.svg",style:{right:"200px"},className:"headerHills",alt:"Hills"}),c.a.createElement("img",{src:"/assets/pics/ground.svg",className:"headerGround",alt:"Ground"}),c.a.createElement("img",{src:"/assets/pics/sun.svg",style:{right:"130px",top:"10px",width:"5%"},className:"headerSkyDetail",alt:"Hills"}),c.a.createElement("img",{src:"/assets/pics/cloud2.svg",style:{right:"240px",top:"40px"},className:"headerSkyDetail",alt:"Hills"}),c.a.createElement("img",{src:"/assets/pics/cloud1.svg",style:{right:"60px",top:"40px"},className:"headerSkyDetail",alt:"Hills"}),c.a.createElement("img",{src:"/assets/pics/cloud2.svg",style:{right:"140px",top:"15px"},className:"headerSkyDetail",alt:"Hills"})),c.a.createElement("div",{className:"statsParent"},c.a.createElement("div",{className:"statsBarParent"},c.a.createElement(l.s,{class:"statsBarIcon",icon:At.q,style:{color:"#C20114"}}),c.a.createElement(Lt.a,{trailWidth:0,percent:o/u*100,className:"statsBarLine",strokeWidth:4,strokeColor:"#C20114"}),c.a.createElement(l.e,{class:"statsBarBadge",color:"danger"},o,"/",u)),c.a.createElement("div",{className:"statsBarParent"},c.a.createElement(l.s,{class:"statsBarIcon",icon:At.s,style:{color:"#157F1F"}}),c.a.createElement(Lt.a,{trailWidth:0,percent:d/h*100,className:"statsBarLine",strokeWidth:4,strokeColor:"#157F1F"}),c.a.createElement(l.e,{class:"statsBarBadge",color:"success"},d,"/",h)),c.a.createElement("div",{className:"statsBarMoneyParent"},c.a.createElement(l.e,{class:"statsBarMoneyBadge",color:"warning"},"Gold: ",p),c.a.createElement(l.e,{class:"statsBarMoneyBadge",color:"success"},"Level: ",f))),c.a.createElement("h1",null,t))}),Ut=F()("todo"),Yt=w.a.Keyboard,Ht=w.a.Device,$t=function(){var e,t,n=oe(st.userid),a=Object(y.h)(),r=Object(y.i)();Ut.info(r,a),a.pathname.startsWith("/todos/tag/")?t=r.tag:e=r.list;var s=function(e,t,n){if(Bt.warn(e,t,n),!e)throw new Error("Projectid can not be undefined");var a=Object(i.useState)({selectedTodo:null,list:void 0,tag:void 0,docs:[],tagDocs:[],doneTodos:!1}),r=Object(m.a)(a,2),s=r[0],c=r[1],o=Object(i.useRef)(new kt),u={save:function(e,t){return o.current.save(e,t)},remove:function(e){return o.current.remove(e)},select:function(e){return o.current.select(e)},selectList:function(e){return o.current.selectList(e)},changeDoneFilter:function(e){return o.current.changeDoneFilter(e)}};return Object(i.useEffect)((function(){return o.current.init(e,t,n),o.current.unsubscribe}),[e,t,n]),Object(i.useEffect)((function(){var e=[o.current.state$.subscribe((function(e){c(e)}))];return function(){e.map((function(e){return e.unsubscribe()}))}}),[e]),[s,u]}(n.id,e,t),o=Object(m.a)(s,2),u=o[0],d=o[1],h=u.docs,f=u.selectedTodo,p=u.tagDocs;return function(){var e=Object(E.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ht.getInfo();case 2:if("ios"===(t=e.sent).operatingSystem||"android"===t.operatingSystem){e.next=5;break}return e.abrupt("return");case 5:Yt.addListener("keyboardWillShow",(function(e){console.log("keyboard will show with height",e.keyboardHeight)})),Yt.addListener("keyboardDidShow",(function(e){console.log("keyboard did show with height",e.keyboardHeight)})),Yt.addListener("keyboardWillHide",(function(){console.log("keyboard will hide")})),Yt.addListener("keyboardDidHide",(function(){console.log("keyboard did hide")}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),c.a.createElement(l.I,null,c.a.createElement(Vt,{title:u.list?"Todos: "+V(u.list.name):"Todos"}),c.a.createElement(l.m,{id:"todoContent"},c.a.createElement(l.u,null),c.a.createElement("div",null,c.a.createElement(l.f,{color:u.doneTodos?"light":"success",class:"todoHeaderButtons",onClick:function(){d.changeDoneFilter(!1)},fill:"clear"},"Active"),c.a.createElement(l.f,{color:u.doneTodos?"success":"light",class:"todoHeaderButtons",onClick:function(){d.changeDoneFilter(!0)},fill:"clear"},"Finished")),c.a.createElement(l.C,null,h.map((function(e){return c.a.createElement(Gt,{todo:e,tagDocs:p,lastChild:!1,selectedTodo:f,dataFunctions:d,key:e.id})})))),c.a.createElement(l.S,null,c.a.createElement(St,{list:u.list,tag:void 0,projectId:n.id||"",saveFunc:d.save})))},qt=function(){return c.a.createElement(l.I,null,c.a.createElement(l.r,null,c.a.createElement(l.S,null,c.a.createElement(l.R,null,"Loading"))),c.a.createElement(l.m,null,c.a.createElement(l.A,null,"Loading.....")))},Wt=F()("parties"),zt={docs:[]},Kt=new(function(){function e(){Object(h.a)(this,e),this._subscription=[],this._state=zt,this.state$=new p.a(this._state)}return Object(f.a)(e,[{key:"init",value:function(){var e=Object(E.a)(x.a.mark((function e(){var t,n,a=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unsubscribe(),t=dt.subscribeChanges().subscribe((function(e){if("party"===e.type&&"project"===e.secondaryType){var t=$(e,a._state.docs);a.state=Object(j.a)({},a._state,{},{docs:t})}})),this._subscription.push(t),e.next=5,dt.queryByProperty("secondaryType","equals","project","party");case 5:n=e.sent,this.state=Object(j.a)({},this._state,{},{docs:n});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addUser",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe(Ke(B.AUTH_API_URL+"/channels/sendAddMemberRequest",{token:st.getToken(),channelid:de(n.id),id:t,rights:"0121"}),!0,"Adding member, please wait");case 3:if((a=e.sent).success){e.next=6;break}return e.abrupt("return",et.printServerErrors(a));case 6:et.showMessage("Member invitation sent",Ve.success),fe(3e3),dt.addSyncCall$.next(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Wt.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"saveParty",value:function(e){e.id||this._createParty(e)}},{key:"_createParty",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt.info("Saving party Project::: ",t),v.showLoading("Creating party, please wait, internet connection required"),e.next=4,dt.saveNewProject(t,"party");case 4:if((n=e.sent).success){e.next=7;break}return e.abrupt("return",et.printServerErrors(n));case 7:v.hideLoading();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveChallenge",value:function(e,t){e.id||this._createChallenge(e,t)}},{key:"_createChallenge",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wt.info("Saving System Doc::: ",n),v.showLoading("Adding Challenge, please wait, internet connection required"),e.next=4,dt.saveSystemDoc(t,n,"party");case 4:if((a=e.sent).success){e.next=7;break}return e.abrupt("return",et.printServerErrors(a));case 7:v.hideLoading();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"acceptPartyInvitation",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe(Ke(B.AUTH_API_URL+"/channels/acceptChannelInvitation",{token:st.getToken(),msgId:t.id},{}),!0,"Accept Reply sent, waiting for reply.");case 3:if((n=e.sent).success){e.next=6;break}return e.abrupt("return",et.printServerErrors(n));case 6:return et.showMessage("Pary Membership request sent. Please wait for app update.",Ve.success),e.next=9,fe(2e3);case 9:dt.addSyncCall$.next(),t.replied={accepted:!0,date:Date.now()},dt.save(t,"msg"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),Wt.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"acceptFriendInvitation",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe(Ke(B.AUTH_API_URL+"/social/acceptFriendInvitation",{token:st.getToken(),msgId:t.id},{}),!0,"Accept Reply sent, waiting for reply.");case 3:if((n=e.sent).success){e.next=6;break}return e.abrupt("return",et.printServerErrors(n));case 6:return et.showMessage("Friend acceptance reply sent. Please wait for app update.",Ve.success),e.next=9,fe(2e3);case 9:dt.addSyncCall$.next(),t.replied={accepted:!0,date:Date.now()},dt.save(t,"msg"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),Wt.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"rejectPartyInviation",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(j.a)({},t,{},{replied:{accepted:!1,date:Date.now()}}),dt.save(n,"msg");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"rejectFriendInviation",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(j.a)({},t,{},{replied:{accepted:!1,date:Date.now()}}),dt.save(n,"msg");case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"changeChallengeState",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Challengeid cannot be undefined");case 2:return e.prev=2,e.next=5,Qe(Ke(B.AUTH_API_URL+"/habits/changeChallengeState",{token:st.getToken(),challengeid:t,state:n},{}),!0,"Saving challenge, please wait.");case 5:if((a=e.sent).success){e.next=8;break}return e.abrupt("return",et.printServerErrors(a));case 8:return e.next=10,dt.saveFromServer(a.data.doc,"party");case 10:return et.showMessage("Challenge saved.",Ve.success),e.next=13,fe(2e3);case 13:return dt.addSyncCall$.next(),e.next=16,fe(2e3);case 16:dt.addSyncCall$.next(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),Wt.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"submitChallengeActions",value:function(){var e=Object(E.a)(x.a.mark((function e(t,n){var a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Challengeid cannot be undefined");case 2:return e.prev=2,a=[{date:R()().format(B.MOMENT_DATE_FORMAT),value:n}],e.next=6,Qe(Ke(B.AUTH_API_URL+"/habits/submitChallengeActions",{token:st.getToken(),challengeid:t,actions:a},{}),!0,"Saving challenge, please wait.");case 6:if((r=e.sent).success){e.next=9;break}return e.abrupt("return",et.printServerErrors(r));case 9:return Wt.trace(r),r.data&&r.data.challenge&&dt.saveFromServer(r.data.challenge,"party"),r.data&&r.data.rewards&&et.showMessage("You have recieved "+r.data.rewards+" points",Ve.success),e.next=14,fe(2e3);case 14:return dt.addSyncCall$.next(),e.next=17,fe(2e3);case 17:dt.addSyncCall$.next(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),Wt.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"acceptChallenge",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe(Ke(B.AUTH_API_URL+"/habits/acceptChallenge",{token:st.getToken(),challengeid:t.id},{}),!0,"Accept Reply sent, waiting for reply.");case 3:if((n=e.sent).success){e.next=6;break}return e.abrupt("return",et.printServerErrors(n));case 6:return et.showMessage("Challenge acceptance request sent. Please wait for update.",Ve.success),e.next=9,fe(2e3);case 9:dt.addSyncCall$.next(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Wt.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){this&&this._subscription.forEach((function(e){e&&e.unsubscribe()}))}},{key:"state",get:function(){return this._state},set:function(e){console.log("State: ",e),this._state=e,this.state$.next(this._state)}}]),e}()),Jt=F()("app");!function(e){e[e.loading=0]="loading",e[e.auth=1]="auth",e[e.guest=2]="guest"}(Nt||(Nt={}));n(265);var Qt={friends:[]},Xt=new(function(){function e(){Object(h.a)(this,e),this._subscription=[],this._userid="",this._state=Qt,this.state$=new p.a(this._state)}return Object(f.a)(e,[{key:"init",value:function(){var e=Object(E.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this._userid){e.next=2;break}return e.abrupt("return");case 2:this._userid=t,this.unsubscribe(),this._init();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_init",value:function(){var e=Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"addFriend",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe(Ke(B.AUTH_API_URL+"/social/sendAddFriendRequest",{token:st.getToken(),username:t}),!0,"Sending invitatin request, please wait");case 3:if((n=e.sent).success){e.next=6;break}return e.abrupt("return",et.printServerErrors(n));case 6:et.showMessage("Friend invitation sent",Ve.success),fe(3e3),dt.addSyncCall$.next(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){this&&this._subscription.forEach((function(e){e&&e.unsubscribe()}))}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this.state$.next(this._state)}}]),e}()),Zt=F()("social"),en=function(e,t){switch(t.type){case"showAddMemberModal":return Object(j.a)({},e,{},{showAddModal:!0});case"hideAddMemberModal":return Object(j.a)({},e,{},{showAddModal:!1});default:return Zt.error("Action type is not a match"),e}},tn=function(){var e=Object(i.useReducer)(en,{showAddModal:!1,friends:[]}),t=Object(m.a)(e,2),n=t[0],a=t[1],r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a({type:e,data:t})},s=function(){r("hideAddMemberModal")};return c.a.createElement(l.g,null,c.a.createElement(l.i,null,c.a.createElement(l.k,null,"Friends")),c.a.createElement(l.h,null,c.a.createElement(l.C,null,n.friends.map((function(e){return c.a.createElement(l.u,{button:!0,key:e.id,onClick:function(){}},c.a.createElement(l.A,null,e.username))})))),c.a.createElement(l.p,null,c.a.createElement(l.f,{onClick:function(){r("showAddMemberModal")},fill:"clear"},"Add Friend")),c.a.createElement(l.b,{isOpen:n.showAddModal,onDidDismiss:function(){return s()},header:"Friend's Username:",inputs:[{name:"username",type:"text",id:"username"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){s()}},{text:"Invite User",handler:function(e){Xt.addFriend(e.username),s()}}]}))},nn=F()("messages"),an=function(e,t){var n=t.type,a=t.payload;switch(n){case"setMessages":return Object(j.a)({},e,{},{messages:a});case"updateMessage":return Object(j.a)({},e,{},{messages:H(a,e.messages)});default:return nn.error("Action type is not a match"),e}},rn=function(e){var t=e.channel,n=Object(i.useReducer)(an,{messages:[]}),a=Object(m.a)(n,2),r=a[0],s=a[1];Object(i.useEffect)((function(){u();var e=dt.subscribeChannelTypeChanges(t,"msg").subscribe((function(e){nn.info(e),o("updateMessage",e)}));return function(){e.unsubscribe()}}),[t]);var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s({type:e,payload:t})},u=function(){var e=Object(E.a)(x.a.mark((function e(){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nn.info("Get all by project, type",t,"msg"),e.next=3,dt.getAllByChannel(t,"msg");case 3:n=e.sent,o("setMessages",n.sort((function(e,t){return e.updated<t.updated?1:-1}))),nn.info(n,t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(e){return"event"===e.messageType?c.a.createElement(l.s,{icon:At.u,slot:"start"}):"channelinvite"===e.messageType?c.a.createElement(l.s,{icon:At.x,slot:"start"}):"friendinvite"===e.messageType?c.a.createElement(l.s,{icon:At.y,slot:"start"}):void 0},h=function(e){if(("channelinvite"===e.messageType||"friendinvite"===e.messageType)&&void 0!==e.replied)return e.replied?c.a.createElement(l.s,{icon:At.p,size:"large",slot:"end",color:"success"}):c.a.createElement(l.s,{icon:At.D,size:"large",slot:"end",color:"warning"})},f=function(e){return"event"===e.messageType?c.a.createElement(l.u,{button:!0,key:e.id,onClick:function(){}},d(e),c.a.createElement(l.A,{className:"ion-text-wrap"},c.a.createElement("h3",null,e.message),c.a.createElement(l.P,{color:"secondary"},c.a.createElement("p",null,U(e.updated))))):"channelinvite"===e.messageType?c.a.createElement(l.u,{button:!0,key:e.id,onClick:function(){}},d(e),c.a.createElement(l.A,{className:"ion-text-wrap"},c.a.createElement("h2",null,e.from," has invited you to join his club,",c.a.createElement("strong",null,e.data.name)),c.a.createElement(l.P,{color:"secondary"},U(e.updated)),c.a.createElement("p",null,function(e){if("channelinvite"===e.messageType&&void 0===e.replied)return c.a.createElement("div",null,c.a.createElement(l.f,{onClick:function(){return Kt.acceptPartyInvitation(e)}},"Accept"),c.a.createElement(l.f,{onClick:function(){return Kt.rejectPartyInviation(e)}},"Reject"))}(e))),h(e)):"friendinvite"===e.messageType?c.a.createElement(l.u,{button:!0,key:e.id,onClick:function(){}},d(e),c.a.createElement(l.A,{className:"ion-text-wrap"},c.a.createElement("h2",null,"You have received friend request from",c.a.createElement("strong",null," ",e.from)),c.a.createElement(l.P,{color:"secondary"},U(e.updated)),c.a.createElement("p",null,function(e){if("friendinvite"===e.messageType&&void 0===e.replied)return c.a.createElement("div",null,c.a.createElement(l.f,{onClick:function(){return Kt.acceptFriendInvitation(e)}},"Accept"),c.a.createElement(l.f,{onClick:function(){return Kt.rejectFriendInviation(e)}},"Reject"))}(e))),h(e)):void 0};return c.a.createElement(l.g,null,c.a.createElement(l.i,null,c.a.createElement(l.k,null,"Messages")),c.a.createElement(l.h,null,c.a.createElement(l.C,null,r.messages.map((function(e){return f(e)})))))},sn=F()("home"),cn=function(e,t){var n=t.type,a=t.payload;switch(n){case"setUserid":return Object(j.a)({},e,{},{userid:a});default:return sn.error("Action Type is incorrect, default called",n,a),e}},on=function(){var e=Object(i.useReducer)(cn,{userid:""}),t=Object(m.a)(e,2),n=t[0],a=t[1],r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a({type:e,payload:t})};return Object(i.useEffect)((function(){var e=st.username$.subscribe((function(){sn.info("Userid update, ",st.userid),r("setUserid",st.userid)}));return sn.info("HOME, ",st.userid),r("setUserid",st.userid),sn.info("Home State",st.userid),function(){e.unsubscribe()}}),[]),c.a.createElement(l.I,null,c.a.createElement(Vt,{title:"HabitVille"}),c.a.createElement(l.m,null,c.a.createElement(tn,null),c.a.createElement(rn,{channel:ce(n.userid)})))},un=function(){return c.a.createElement(l.I,null,c.a.createElement(l.r,null,c.a.createElement(l.S,null,c.a.createElement(l.R,null,"habits"))),c.a.createElement(l.m,null,c.a.createElement("div",{style:{padding:"20px"}},"This page does not exist")))},ln=function(e){var t=e.data,n=e.updateFunction;return c.a.createElement(l.u,null,c.a.createElement(l.A,{position:"stacked"},t.displayName,t.hasValidation?c.a.createElement(l.P,{color:"danger"},"*"):null),c.a.createElement(l.t,{name:t.id,value:t.value,type:t.type,onIonBlur:function(e){!0!==t.dirty&&n(Object(j.a)({},t,{},{value:e.target.value,dirty:!0}))},onIonChange:function(e){n(Object(j.a)({},t,{},{value:e.target.value,dirty:!0}))}}),t.messages.map((function(e){return c.a.createElement(l.H,{key:e},e)})),function(){if(t.dirty)return t.errors.map((function(e){return c.a.createElement(l.H,{key:e,color:"danger"},e)}))}())},dn=n(83),mn=n.n(dn),hn={submitButtonText:"Submit"},fn=function(e){return Object(j.a)({},hn,{},e)};function pn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:e,options:t,message:n}}var vn=function(e){var t=e.submitFunction,n=e.options||hn,a=Object(i.useState)({items:[],valid:!1}),r=Object(m.a)(a,2),s=r[0],o=r[1];Object(i.useEffect)((function(){u(e.items)}),[e.items]);var u=function(e){var t=[];e&&(e.forEach((function(e){var n=e.messages;console.log(typeof n),"string"===typeof n?console.log("Messages is string"):Array.isArray(n)?console.log("messages array"):n=[],t.push(h({id:e.id,displayName:e.displayName||e.id,type:e.type,value:e.default||"",messages:n,errors:[],dirty:!1,hasValidation:Array.isArray(e.validators)&&e.validators.length>0}))})),o({items:t,valid:p(t)}))},d=function(e){var t=H(h(e),s.items,"id");o({items:t,valid:p(t)})},h=function(e){var t=f(e.id,e.value);return Object(j.a)({},e,{},{errors:t})},f=function(t,n){if("string"!==typeof n)return[];var a=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",a=0;a<t.length;a++)if(e===t[a][n])return t[a];return null}(t,e.items,"id");a.validators||(a.validators=[]);var r=[];return a.validators.forEach((function(e){"isEmpty"===e.type&&mn.a.isEmpty(n)&&r.push(e.message||"Value cannot be empty"),"isLength"===e.type&&(mn.a.isLength(n,e.options)||r.push(e.message||"Value length is not valid")),"isEmail"===e.type&&(mn.a.isEmail(n,e.options)||r.push(e.message||"Valid Email required"))})),r},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.items,t=0;return e.forEach((function(e){t+=e.errors.length})),0===t};return c.a.createElement("div",null,Object.values(s.items).map((function(e){return c.a.createElement(ln,{key:e.id,data:e,updateFunction:d})})),c.a.createElement(l.f,{key:"submitButton",onClick:function(){var e={};s.items.forEach((function(t){e[t.id]={value:t.value}})),t(e),console.log(s)},disabled:!s.valid,color:"primary"},n.submitButtonText))},bn=(n(102),function(e){var t=e.page,n=Object(y.h)(),a=Object(y.g)(),r=function(e){n.pathname&&e!==n.pathname&&a.push(e)};return c.a.createElement("div",{className:"authMenuParent"},c.a.createElement(l.f,{onClick:function(){return r("/auth/login")},size:"small",color:"login"===t?"success":"light",fill:"clear"},"Login"),c.a.createElement(l.f,{onClick:function(){return r("/auth/register")},size:"small",color:"register"===t?"success":"light",fill:"clear"},"Register"))}),yn=function(){var e=Object(y.h)(),t=Object(y.g)(),n=fn({submitButtongText:"Login"}),a=[{id:"id",displayName:"ID (Username or Email): ",type:"string",validators:[pn("isLength",{min:3,max:50},"ID needs to be between 3 to 50 characters")]},{id:"password",displayName:"Password: ",type:"password",validators:[pn("isLength",{min:3,max:50},"ID needs to be between 3 to 50 characters")]}],r=function(){var n=Object(E.a)(x.a.mark((function n(a){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:st.loginAndRedirect(a.id.value,a.password.value,t,e);case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return c.a.createElement(l.I,null,c.a.createElement(l.r,null,c.a.createElement(l.S,{color:"primary"},c.a.createElement(l.R,null,"Login"))),c.a.createElement(l.m,null,c.a.createElement("div",{style:{paddingTop:"50px"},className:"ion-text-center"},c.a.createElement(l.s,{icon:At.t,color:"primary",className:"iconFormCenter"})),c.a.createElement(bn,{page:"login"}),c.a.createElement("div",{style:{padding:"20px"}},c.a.createElement(vn,{items:a,options:n,submitFunction:r}))))},gn=function(){var e=Object(y.h)(),t=Object(y.g)(),n=fn({submitButtongText:"Login"}),a=[{id:"username",displayName:"Username: ",type:"string",validators:[pn("isLength",{min:3,max:20},"Username needs to be between 3 to 20 characters")]},{id:"email",displayName:"Email: ",type:"string",validators:[pn("isEmail",{},"Email is not valid")]},{id:"password",displayName:"Password: ",type:"password",validators:[pn("isLength",{min:3,max:50},"Password needs to be between 3 to 50 characters")]}],r=function(){var n=Object(E.a)(x.a.mark((function n(a){return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,st.register(a.username.value,a.email.value,a.password.value);case 2:n.sent&&st.loginAndRedirect(a.username.value,a.password.value,t,e);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return c.a.createElement(l.I,null,c.a.createElement(l.r,null,c.a.createElement(l.S,{color:"primary"},c.a.createElement(l.R,null,"Register"))),c.a.createElement(l.m,null,c.a.createElement("div",{style:{paddingTop:"50px"},className:"ion-text-center"},c.a.createElement(l.s,{color:"primary",icon:At.t,className:"iconFormCenter"})),c.a.createElement(bn,{page:"register"}),c.a.createElement("div",{style:{padding:"20px"}},c.a.createElement(vn,{items:a,options:n,submitFunction:r}))))},kn=function(e){var t=e.exact,n=e.path,a=Object(y.h)();return"/auth/register"===a.pathname?c.a.createElement(y.c,{path:n,component:gn,exact:t}):"/auth/login"===a.pathname?c.a.createElement(y.c,{path:"/auth/login",render:function(){return c.a.createElement(yn,null)}}):c.a.createElement(y.b,{to:{pathname:"/auth/login",state:{prev:a.pathname}}})},xn=F()("habits"),En=function(){return{selected:null,habits:[],stageFilter:a.current}},wn=function(){function e(){Object(h.a)(this,e),this._project=void 0,this._state=En(),this.state$=new p.a(this._state),this._docs=[],this.docs$=new p.a(this._docs),this._subscription=[]}return Object(f.a)(e,[{key:"getProject",value:function(){return this._project}},{key:"init",value:function(e){var t=this,n=dt.getReadySub().subscribe(function(){var a=Object(E.a)(x.a.mark((function a(r){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r){a.next=2;break}return a.abrupt("return");case 2:if(!Ge.a.isEqual(e,t._project)){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,t._init(e);case 7:n.unsubscribe();case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}},{key:"_init",value:function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._project||this._project.id!==t.id){e.next=2;break}return e.abrupt("return");case 2:return this._project=t,e.next=5,dt.getAllByProject(t.id,"hab");case 5:this._docs=e.sent,this.filterhabits(),n=dt.subscribeProjectTypeChanges(t.id,"hab").subscribe((function(e){e.deleted?a._docs=a._docs.filter((function(t){return t.id!==e.id})):a._docs=pe(e,a._docs),a.filterhabits()})),this._subscription.push(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"filterhabits",value:function(){var e=this,t=this._docs.filter((function(t){return e.filterFunction(t)}));this.state=Object(j.a)({},this._state,{},{habits:t})}},{key:"filterFunction",value:function(e){return e.stage===this._state.stageFilter}},{key:"save",value:function(e){if(xn.info("Save: ",e,this._project,"hab"),e.id)dt.save(Object(j.a)({},{done:!1},{},e),"hab",{projectid:this._project.id});else if(t=this._project.id,n=st.getUser().id,de(t)===ce(n))return e=Object.assign(yt.calculateNewHabitRewards(e)),dt.save(Object(j.a)({},{done:!1},{},e),"hab",{projectid:this._project.id});var t,n}},{key:"remove",value:function(e){dt.remove(e,"hab")}},{key:"select",value:function(e){this.state=Object(j.a)({},this._state,{},{selected:e})}},{key:"changeStageFilter",value:function(e){e!==this._state.stageFilter&&(this._state=Object(j.a)({},this._state,{},{stageFilter:e}),this.filterhabits())}},{key:"unsubscribe",value:function(){this&&this._subscription.forEach((function(e){e&&e.unsubscribe()}))}},{key:"state",get:function(){return this._state},set:function(e){this._state=e,this.state$.next(this._state)}},{key:"docs",get:function(){return this._docs},set:function(e){this._docs=e,this.docs$.next(this._docs)}}]),e}();n(329);var jn=function(e){var t=e.habit,n=e.dataFunctions,a=e.showEditModalFunction,s=Object(i.useState)(t),o=Object(m.a)(s,2),u=o[0],d=o[1];Object(i.useEffect)((function(){d(t)}),[t]);var h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=R()().subtract(e,"day");return t?c.a.createElement(l.A,{color:"primary"},n.format("DD")," ",c.a.createElement("br",null)," ",n.format("dd")):c.a.createElement(c.a.Fragment,null,n.format("DD")," ",c.a.createElement("br",null)," ",n.format("dd"))},f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=R()().subtract(e,"day"),a=u.progress.find((function(e){return n.format("YYYYMMDD")===e.date}));return a||(a={date:n.format("YYYYMMDD"),value:0}),t?c.a.createElement(l.s,{onClick:function(){return p(e,a)},size:"large",key:e,color:a.value>0?"success":"dark",icon:a.value>0?At.h:At.z}):c.a.createElement(l.s,{size:"large",key:e,color:a.value>0?"success":"danger",icon:a.value>0?At.h:At.z})},p=function(e,t){var a={date:t.date,value:0===t.value?1:0},s=be(a.date,u.progress,"date");-1!==s&&(a=Object(j.a)({},u.progress[s],{},a));var i=pe(a,u.progress,"date"),c=yt.calculateHabitProgressRewards(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(e.regularityInterval===r.day){var n=ee(e,t);return n}return e.regularityInterval===r.week?Z(e,t):e.regularityInterval===r.month?X(e,t):e}(Object(j.a)({},u,{},{progress:i})),a);n.save(c)};return c.a.createElement(l.g,null,c.a.createElement(l.i,null,c.a.createElement(l.k,null,u.name),c.a.createElement(l.e,{class:"habitBadge",color:"success"},u.currentStreak),c.a.createElement(l.e,{class:"habitBadge",color:"tertiary"},u.bestStreak)),c.a.createElement(l.u,null,c.a.createElement(l.q,null,c.a.createElement(l.L,{class:"datecell"},c.a.createElement(l.l,null,h(6)),c.a.createElement(l.l,null,h(5)),c.a.createElement(l.l,null,h(4)),c.a.createElement(l.l,null,h(3)),c.a.createElement(l.l,null,h(2)),c.a.createElement(l.l,null,h(1)),c.a.createElement(l.l,null,h(0,!0))),c.a.createElement(l.L,{class:"datecell"},c.a.createElement(l.l,null,f(6)),c.a.createElement(l.l,null,f(5)),c.a.createElement(l.l,null,f(4)),c.a.createElement(l.l,null,f(3)),c.a.createElement(l.l,null,f(2)),c.a.createElement(l.l,null,f(1)),c.a.createElement(l.l,null,f(0,!0))))),c.a.createElement(l.h,null,"day"===u.regularityInterval?c.a.createElement(l.u,null,c.a.createElement(l.H,null,"Remember, you promised that you will repeat this habit ",c.a.createElement("strong",null,"every day"),".")):c.a.createElement(l.u,null,c.a.createElement(l.H,null,"Remember you promised that you will repeat this habit",c.a.createElement("strong",null," ",u.regularityValue," times ",u.regularityInterval)))),c.a.createElement(l.n,{horizontal:"end",vertical:"bottom",edge:!0},c.a.createElement(l.o,{size:"small",color:"light",onClick:function(){return a(u)}},c.a.createElement(l.s,{size:"large",icon:At.n}))))},On=function(e){switch(e){case r.day:return{interval:e,min:1,max:1};case r.week:return{interval:e,min:1,max:6};case r.month:return{interval:e,min:1,max:25}}},_n=function(e){var t=e.habit,n=e.dismissFunc,a={regularity:On(t.regularityInterval),doc:new P,showDeleteWarrning:!1},r=Object(i.useState)(Object(j.a)({},a,{},{doc:t})),o=Object(m.a)(r,2),u=o[0],d=o[1],h=function(e){var t=Object(j.a)({},u.doc,{},Object(re.a)({},e.target.name,e.detail.value)),n=Object(j.a)({},u,{},{doc:t});d(n)},f=function(e){var t=Object(j.a)({},u.doc,{},{regularityValue:e.detail.value});d(Object(j.a)({},u,{},{doc:t}))},p=function(e){var t=Object(j.a)({},u.doc,{},{difficulty:e.detail.value});d(Object(j.a)({},u,{},{doc:t}))},v=function(){d(Object(j.a)({},u,{},{showDeleteWarrning:!1}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.r,null,c.a.createElement(l.S,null,c.a.createElement(l.R,null,"Add Habit"))),c.a.createElement(l.m,null,c.a.createElement(l.u,null,c.a.createElement(l.A,{position:"floating"},"Name"),c.a.createElement(l.t,{name:"name",placeholder:"Read book, Go running ...",onIonChange:h,value:u.doc.name})),c.a.createElement(l.u,null,c.a.createElement(l.A,{position:"floating"},"Note"),c.a.createElement(l.Q,{placeholder:"Enter more information here, motivate yourself...",name:"note",onIonChange:h,value:u.doc.note})),c.a.createElement(l.u,null,c.a.createElement(l.M,{value:u.doc.regularityInterval,onIonChange:function(e){return function(e){e=e||"day";var t=Object(j.a)({},u.doc,{},{regularityInterval:e,regularityValue:1}),n=Object(j.a)({},u.regularity,{},On(e));d(Object(j.a)({},u,{},{doc:t,regularity:n}))}(e.detail.value)}},c.a.createElement(l.N,{value:"day"},c.a.createElement(l.A,null,"Daily")),c.a.createElement(l.N,{value:"week"},c.a.createElement(l.A,null,"Weekly")),c.a.createElement(l.N,{value:"month"},c.a.createElement(l.A,null,"Monthly")))),"day"!==u.doc.regularityInterval?c.a.createElement(c.a.Fragment,null,c.a.createElement(l.J,{min:u.regularity.min,max:u.regularity.max,debounce:100,value:u.doc.regularityValue,onIonChange:f,color:"secondary"},c.a.createElement(l.A,{slot:"start"},u.regularity.min),c.a.createElement(l.A,{slot:"end"},u.regularity.max))):c.a.createElement(c.a.Fragment,null),c.a.createElement(l.u,null,c.a.createElement(l.A,null,function(){var e=u.doc.regularityValue>1?" times a ":" time a ";return"day"===u.doc.regularityInterval?"I will repeat this habit every day.":"I will repeat this habit "+u.doc.regularityValue+e+u.doc.regularityInterval}())),c.a.createElement(l.J,{min:0,max:4,debounce:100,value:u.doc.difficulty,onIonChange:p,color:"secondary"},c.a.createElement(l.A,{slot:"start"},V(T(s.trivial))),c.a.createElement(l.A,{slot:"end"},V(T(s.extreme)))),c.a.createElement(l.u,null,c.a.createElement(l.A,null,function(e){switch(e){case s.trivial:return"Easy peasy lemon squeezy";case s.easy:return"Piece of Cake";case s.medium:return"Let's Rock";case s.hard:return"No Pain, No Gain";case s.extreme:return"Death Wish"}}(u.doc.difficulty)))),c.a.createElement(l.p,null,c.a.createElement(l.S,null,c.a.createElement(l.R,null,c.a.createElement(l.f,{onClick:function(){return n(u.doc,"save")}},"Save"),c.a.createElement(l.f,{onClick:function(){return n(null,"none")}},"Cancel")))),c.a.createElement(l.n,{horizontal:"end",vertical:"bottom"},c.a.createElement(l.o,{size:"small",color:"danger",onClick:function(){d(Object(j.a)({},u,{},{showDeleteWarrning:!0}))}},c.a.createElement(l.s,{size:"large",icon:At.I}))),c.a.createElement(l.b,{isOpen:u.showDeleteWarrning,onDidDismiss:function(){return v},header:"Warrning!!!",message:"Are you sure you want to <strong>delete</strong> this habit?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Yes Im Sure",handler:function(){return v(),void n(u.doc,"remove")}}]}))},Sn=function(e,t){switch(t.type){case"showModal":return Object(j.a)({},e,{},{showModal:t.data.showModal,modalHabit:t.data.habit});case"hideModal":default:return e}};function An(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:e,data:t}}var Dn=function(){var e=function(e){var t=Object(i.useState)(En()),n=Object(m.a)(t,2),a=n[0],r=n[1],s=Object(i.useRef)(new wn),c={save:function(e){s.current.save(e)},remove:function(e){return s.current.remove(e)},select:function(e){return s.current.select(e)},changeStageFilter:function(e){return s.current.changeStageFilter(e)}};return Object(i.useEffect)((function(){if(!Ge.a.isEqual(s.current.getProject(),e))return s.current.init(e),s.current.unsubscribe}),[e]),Object(i.useEffect)((function(){var e=[s.current.state$.subscribe((function(e){r(e)}))];return function(){e.map((function(e){return e.unsubscribe()}))}}),[e]),[a,c]}(oe(st.userid)),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(i.useReducer)(Sn,{showModal:!1,modalHabit:null}),s=Object(m.a)(r,2),o=s[0],u=s[1],d=n.habits,h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new P;u(An("showModal",{showModal:!0,habit:e}))};return c.a.createElement(l.I,null,c.a.createElement(Vt,{title:"Habits"}),c.a.createElement(l.m,null,c.a.createElement(l.C,null,d.map((function(e){return c.a.createElement(jn,{habit:e,dataFunctions:a,key:e.id,showEditModalFunction:h})}))),o.showModal?c.a.createElement(l.G,{isOpen:o.showModal,onDidDismiss:function(){u(An("showModal",{showModal:!1,habit:null}))}},c.a.createElement(_n,{habit:o.modalHabit||new P,dismissFunc:function(e,t){u(An("showModal",{showModal:!1,habit:null})),"save"===t&&null!=e?a.save(e):"remove"===t&&null!=e&&e.id&&a.remove(e.id)}})):c.a.createElement(c.a.Fragment,null),c.a.createElement(l.n,{vertical:"top",horizontal:"end",slot:"fixed",edge:!0},c.a.createElement(l.o,{onClick:function(){return h()}},c.a.createElement(l.s,{icon:At.a})))))},Cn=function(){return c.a.createElement(l.r,{className:"menuHeaderWithAvatar"},c.a.createElement("h1",null,"Menu"))},Tn=F()("todo"),Pn=function(e){var t=e.projectid,n=Object(i.useState)({name:""}),a=Object(m.a)(n,2),r=a[0],s=a[1],o=function(){var e=Object(E.a)(x.a.mark((function e(){var n,a,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=he(t,"todolist",encodeURI(r.name)),(a=new xe({id:n,name:r.name,secondaryType:"todolist",project:le(t)}))._new=!0,Tn.info("NEW TODO LIST::::::::::::::: ",a),e.next=6,xt.saveList(a);case 6:s=e.sent,Tn.info(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(l.t,{className:"new-todo",placeholder:"Add new List?",onKeyPress:function(e){"Enter"===e.key&&(o(),s({name:""}))},onIonChange:function(e){s({name:e.detail.value})},value:r.name})},In=n(157),Rn=(n(330),function(e){return new Promise((function(t){setTimeout(t,e)}))}),Mn=function(e){var t=e.name,n=e.color,a=e.actonFunc,r=Object(i.useState)({isStopped:!0,isPaused:!0}),s=Object(m.a)(r,2),o=s[0],u=s[1],d={loop:!0,autoplay:!0,animationData:In,rendererSettings:{clearCanvas:!0,scaleMode:"noScale",preserveAspectRatio:"xMidYMid slice"}},h=function(){var e=Object(E.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u({isStopped:!1,isPaused:!1}),a(),e.next=4,Rn(1e3);case 4:u({isStopped:!0,isPaused:!0});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(l.u,{button:!0,onClick:function(){return h()},color:n,routerLink:encodeURI("/todos/tag/today"),routerDirection:"none",lines:"none"},c.a.createElement("div",{className:"lottieicon"},c.a.createElement(_e.a,{options:d,height:25,width:25,isStopped:o.isPaused,isPaused:o.isStopped})),t)},Fn=F()("todo"),Gn={tags:[],tagsOpen:!1,lists:[],openLists:[],showDeleteListAlert:!1,deleteList:new xe},Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gn,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"hideDeleteAlert":return Object(j.a)({},e,{},{showDeleteListAlert:!1});case"showDeleteAlert":return Object(j.a)({},e,{},{showDeleteListAlert:!0,deleteList:a});case"setTodoList":return a.deleted?Object(j.a)({},e,{},{lists:e.lists.filter((function(e){return e.id!==a.id}))}):Object(j.a)({},e,{},{lists:pe(a,e.lists)});case"setTodoLists":return Object(j.a)({},e,{},{lists:a});default:return Fn.error("REDUCER GOT UNHANDLED TYPE ",n,a),e}},Nn=function(e){var t=e.projectid,n=Object(y.h)().pathname;Fn.warn(n);var a=Object(i.useReducer)(Bn,Gn),r=Object(m.a)(a,2),s=r[0],o=r[1],u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o({type:e,payload:t})};Object(i.useEffect)((function(){var e=dt.subscribeProjectTypeChanges(t,"todolist").subscribe((function(e){Fn.info("Menu Change: ",e),u("setTodoList",e)}));return d(t),function(){e.unsubscribe()}}),[st.userid]);var d=function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.getAllByProject(t,"todolist");case 2:n=e.sent,Fn.info(n),u("setTodoLists",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(l.C,null,c.a.createElement(l.w,{key:"listsGroup"},c.a.createElement(Mn,{name:"Today",color:"/todos/tag/today"===n?"light":"",actonFunc:function(){return e="today",void console.log(e);var e}}),s.lists.map((function(e){return c.a.createElement(l.z,{key:e.name+"list"},c.a.createElement(l.u,{button:!0,color:n==="/todos/"+e.name?"light":"",routerLink:encodeURI("/todos/"+e.name),routerDirection:"none",lines:"none"},c.a.createElement(l.A,null,e.name)),c.a.createElement(l.y,{side:"end"},c.a.createElement(l.x,{color:"danger",onClick:function(){return u("showDeleteAlert",e)}},"Delete")))}))),c.a.createElement(l.v,null),c.a.createElement(Pn,{key:"addNewItem",projectid:t}),c.a.createElement(l.b,{isOpen:s.showDeleteListAlert,onDidDismiss:function(){return u("hideDeleteAlert")},header:"Are you sure you want to delete '"+s.deleteList.name+"' list?",subHeader:"All tasks in this list will be deleted",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){return u("hideDeleteAlert")}},{text:"Delete List",handler:function(){xt.deleteList(s.deleteList)}}]}))},Ln=F()("menu"),Vn=(At.H,At.G,At.g,At.q,At.d,At.o,function(e){return{projectid:e,appPages:[{title:"Home",url:"/home",icon:At.r},{title:"Habits",url:"/habits",icon:At.A},{title:"Parties",url:"/parties",icon:At.e},{title:"Todos",url:"/todos",icon:At.b,lastComponent:c.a.createElement(Nn,{projectid:e})}]}}),Un=function(e,t){var n=t.type,a=t.payload;switch(n){case"authChange":return Vn(oe(st.userid).id);default:return Ln.error("REDUCER GOT UNHANDLED TYPE ",n,a),e}};n(331);var Yn=F()("menu"),Hn=Object(y.j)((function(){var e=function(){var e=oe(st.userid),t=Object(i.useReducer)(Un,Vn(e.id)),n=Object(m.a)(t,2),a=n[0],r=n[1];return Object(i.useEffect)((function(){var e=st.username$.subscribe((function(e){r({type:"authChange",payload:st.userid})}));return function(){e.unsubscribe()}}),[]),[a,{}]}(),t=Object(m.a)(e,1)[0],n=Object(y.h)().pathname;return Yn.warn(n),c.a.createElement(l.E,{key:"ionmenu_left",contentId:"main",type:"overlay"},c.a.createElement(Cn,null),c.a.createElement(l.m,{key:"menu_left"},c.a.createElement(l.q,null,t.appPages.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.L,{key:e.title.replace(" ","")+e.url+t},c.a.createElement(l.l,{class:"leftMenuCol"},c.a.createElement(l.F,{autoHide:!1},c.a.createElement(l.u,{color:n===e.url?"light":"",routerLink:e.url,routerDirection:"none"},c.a.createElement(l.s,{slot:"start",icon:e.icon}),c.a.createElement(l.A,null,e.title))))),e.lastComponent?e.lastComponent:c.a.createElement(c.a.Fragment,null))})))))})),$n=function(e){var t=e.party,n=e.dismissFunc,a=Object(i.useState)({party:t||new Ue}),r=Object(m.a)(a,2),s=r[0],o=r[1],u=function(e){var t=Object(j.a)({},s.party,{},Object(re.a)({},e.target.name,e.detail.value)),n=Object(j.a)({},s,{},{party:t});o(n)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.r,null,c.a.createElement(l.S,null,c.a.createElement(l.R,null,"Add/Edit Party"))),c.a.createElement(l.m,null,c.a.createElement(l.u,null,c.a.createElement(l.A,{position:"floating"},"Name"),c.a.createElement(l.t,{name:"name",placeholder:"Your Cool Party Name",onIonChange:u,value:s.party.name})),c.a.createElement(l.u,null,c.a.createElement(l.A,{position:"floating"},"Note"),c.a.createElement(l.Q,{placeholder:"More details for your party members",name:"note",onIonChange:u,value:s.party.note})),c.a.createElement(l.p,null,c.a.createElement(l.S,null,c.a.createElement(l.R,null,c.a.createElement(l.f,{onClick:function(){return n(s.party,"save")}},"Save"),c.a.createElement(l.f,{onClick:function(){return n(null,"none")}},"Cancel"))))))},qn=function(e){var t=e.partyProject,n=e.history,a=(e.showEditModalFunction,Object(i.useState)({party:t})),r=Object(m.a)(a,2),s=r[0],o=r[1];return Object(i.useEffect)((function(){o(Object(j.a)({},s,{},{party:t}))}),[t]),c.a.createElement(l.g,null,c.a.createElement(l.i,{onClick:function(){return n.push("/parties/"+encodeURI(s.party.id||""))}},c.a.createElement(l.k,null,s.party.name,c.a.createElement(l.e,null,s.party.members.length)),c.a.createElement(l.j,null,s.party.note)))},Wn=F()("parties"),zn=function(e,t){switch(t.type){case"dismissEdit":return Object(j.a)({},e,{},{showModal:!1,party:null});case"edit":return Object(j.a)({},e,{},{showModal:!0,party:t.data});case"docs":return Object(j.a)({},e,{},{docs:t.data});case"userid":return Object(j.a)({},e,{},{userId:t.data});default:return Wn.error("ERROR, INCORRECT ACTION TYPE ",t),e}},Kn=function(){var e=Object(y.g)(),t=Object(i.useReducer)(zn,{userId:"",showModal:!1,party:new Ue,docs:[]}),n=Object(m.a)(t,2),a=n[0],r=n[1],s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;r({type:e,data:t})};Object(i.useEffect)((function(){var e=[st.username$.subscribe((function(e){s("userid",st.userid)})),Kt.state$.subscribe((function(e){s("docs",e.docs)}))];return function(){e.forEach((function(e){e&&e.unsubscribe()}))}}),[]);var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ue;s("edit",e)};return c.a.createElement(l.I,null,c.a.createElement(Vt,{title:"Parties"}),c.a.createElement(l.m,null,a.showModal?c.a.createElement(l.G,{isOpen:a.showModal,onDidDismiss:function(){s("dismissEdit")}},c.a.createElement($n,{party:a.party,dismissFunc:function(e,t){s("dismissEdit"),"save"===t&&null!=e?Kt.saveParty(e):"remove"===t&&null!=e&&e.id}})):c.a.createElement(c.a.Fragment,null),c.a.createElement(l.g,null,c.a.createElement(l.i,null,c.a.createElement(l.k,null,"Here you can join friends to conquer those tasks together."),c.a.createElement(l.j,null)),c.a.createElement(l.h,null,c.a.createElement(l.A,null,"Create your party to go on quests and challenge your friends."),c.a.createElement(l.f,{onClick:function(){return o()}},"Create Party"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(l.A,null,"Join your friends party, give them your code: ",c.a.createElement("strong",null,a.userId)))),c.a.createElement(l.C,null,a.docs.map((function(t){return c.a.createElement(qn,{partyProject:t,history:e,key:t.id,showEditModalFunction:o})}))),c.a.createElement(l.u,null,c.a.createElement(l.A,null,"To join a party, you can give part leader your id: ",a.userId," "))))},Jn=(n(332),function(e){var t=e.member,n=function(e){var n=t.scoreHistory[e],a="light",r=0;return n&&(a="success",r=n.exp),c.a.createElement(l.e,{class:"scoreHistoryBadge",color:a},r)};return c.a.createElement(c.a.Fragment,null,n(R()().subtract(6,"d").format("YYYYMMDD")),n(R()().subtract(5,"d").format("YYYYMMDD")),n(R()().subtract(4,"d").format("YYYYMMDD")),n(R()().subtract(3,"d").format("YYYYMMDD")),n(R()().subtract(2,"d").format("YYYYMMDD")),n(R()().subtract(1,"d").format("YYYYMMDD")),n(R()().subtract(0,"d").format("YYYYMMDD")))}),Qn=F()("memberlist"),Xn=function(e,t){switch(t.type){case"showAddMemberModal":return Object(j.a)({},e,{},{showAddModal:!0});case"hideAddMemberModal":return Object(j.a)({},e,{},{showAddModal:!1});default:return Qn.error("Action type is not a match"),e}},Zn=function(e){var t=e.project,n=Object(i.useReducer)(Xn,{showAddModal:!1,members:[]}),a=Object(m.a)(n,2),r=a[0],s=a[1],o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s({type:e,data:t})},u=function(){o("hideAddMemberModal")};return c.a.createElement(l.g,null,c.a.createElement(l.i,null,c.a.createElement(l.k,null,"Members")),c.a.createElement(l.h,null,c.a.createElement(l.C,null,t.members.sort((function(e,t){return t.score.exp-e.score.exp})).map((function(e,t){return c.a.createElement(l.u,{key:e.id},c.a.createElement(l.A,null,c.a.createElement("h2",null,e.username," -",c.a.createElement(Jn,{member:e}))),function(e,t){var n="light";return 0===t&&(n="success"),1===t&&(n="secondary"),c.a.createElement(l.e,{slot:"end",color:n},e.exp)}(e.score,t))})))),function(){var e=t.members.find((function(e){return e.id===st.userid}));return!!e&&ge(e.rights)}()?c.a.createElement(l.p,null,c.a.createElement(l.f,{onClick:function(){o("showAddMemberModal")},fill:"clear"},"Invite")):c.a.createElement(c.a.Fragment,null),c.a.createElement(l.b,{isOpen:r.showAddModal,onDidDismiss:function(){return u()},header:"Friend ID:",subHeader:"Found at bottom of parties page.",inputs:[{name:"userid",type:"text",id:"adduserid"}],buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:function(){u()}},{text:"Invite User",handler:function(e){Kt.addUser(e.userid,t),u()}}]}))},ea=function(e,t){switch(t.type){case"challenge":return Object(j.a)({},e,{},{challenge:t.data});default:return console.log("ERROR WENT TO DEFAULTS:: ",t),e}},ta=function(e){var t=e.challenge,n=Object(i.useReducer)(ea,{challenge:t}),a=Object(m.a)(n,2),r=a[0],s=a[1];Object(i.useEffect)((function(){s({type:"challenge",data:t})}),[t]);return c.a.createElement(l.C,null,r.challenge.members.sort((function(e,t){return t.score.exp-e.score.exp})).map((function(e,t){return c.a.createElement(l.u,{key:e.id},c.a.createElement(l.A,null,c.a.createElement("h2",null,e.username," -",c.a.createElement(Jn,{member:e}))),function(e,t){var n="light";return 0===t&&(n="success"),1===t&&(n="secondary"),c.a.createElement(l.e,{slot:"end",color:n},e.exp)}(e.score,t))})))},na=F()("clubs"),aa=function(e,t){switch(t.type){case"challenge":return Object(j.a)({},e,{},{challenge:t.data});default:return console.log("ERROR WENT TO DEFAULTS:: ",t),e}},ra=function(e){var t=e.challenge,n=(e.showEditModalFunction,Object(i.useReducer)(aa,{challenge:t})),a=Object(m.a)(n,2),r=a[0],s=a[1];Object(i.useEffect)((function(){s({type:"challenge",data:t})}),[t]);var o=t.members.find((function(e){return e.id===st.userid}));na.info("Challenge Item: ",r);var u=function(){if(function(e,t){var n=ye(e,t);return!!n&&ge(n)}(r.challenge.id,st.getUser()))return r.challenge.state===Ae.waiting?c.a.createElement(c.a.Fragment,null,c.a.createElement(l.f,{size:"small",fill:"clear",onClick:function(){return Kt.changeChallengeState(r.challenge.id,Ae.current)}},"Start Challenge"),c.a.createElement(l.f,{size:"small",fill:"clear",onClick:function(){return Kt.changeChallengeState(r.challenge.id,Ae.waiting)}},"Freeze For Future Use")):void(r.challenge.state===Ae.current||r.challenge.state===Ae.finished||(r.challenge.state,Ae.future))};return c.a.createElement(l.g,null,c.a.createElement(l.i,null,r.challenge.state===Ae.waiting?c.a.createElement(l.k,null,r.challenge.name," - Join if you dare"):r.challenge.state===Ae.current?c.a.createElement(l.k,null,r.challenge.name," - In progress"):r.challenge.state===Ae.finished?c.a.createElement(l.k,null,r.challenge.name," - Finished"):r.challenge.state===Ae.future?c.a.createElement(l.k,null,r.challenge.name," - Preivew of future challenge"):c.a.createElement(l.k,null,r.challenge.name)),c.a.createElement(l.h,null,c.a.createElement(ta,{challenge:r.challenge}),"day"===r.challenge.regularityInterval?c.a.createElement(l.u,null,c.a.createElement(l.A,null,c.a.createElement("h2",null,r.challenge.note),c.a.createElement(l.H,null,"Challenge goal, for ",c.a.createElement("strong",null,"every day"),"."))):c.a.createElement(l.u,null,c.a.createElement(l.A,null,c.a.createElement("h2",null,r.challenge.note),c.a.createElement(l.H,null,"Challenge goal is for",c.a.createElement("strong",null," ",r.challenge.regularityIntervalGoal," times ",r.challenge.regularityInterval))))),c.a.createElement(l.p,null,r.challenge.state===Ae.waiting&&void 0===o?c.a.createElement(l.f,{size:"small",fill:"clear",onClick:function(){return Kt.acceptChallenge(r.challenge)}},"Accept Challenge"):r.challenge.state===Ae.current?c.a.createElement(l.f,{size:"small",fill:"clear",onClick:function(){return Kt.submitChallengeActions(r.challenge.id,1)}},"Done"):void(r.challenge.state===Ae.finished||(r.challenge.state,Ae.future)),u()))},sa=(F()("party"),function(e){switch(e){case Ce.day:return{interval:e,min:1,max:1};case Ce.week:return{interval:e,min:1,max:6};case Ce.month:return{interval:e,min:1,max:25}}}),ia=function(e){var t=e.challenge,n=e.dismissFunc,a=t||new Ye,r={regularity:sa(a.regularityInterval),doc:a,showDeleteWarrning:!1},s=Object(i.useState)(Object(j.a)({},r,{},{doc:a})),o=Object(m.a)(s,2),u=o[0],d=o[1],h=function(e){var t=Object(j.a)({},u.doc,{},Object(re.a)({},e.target.name,e.detail.value)),n=Object(j.a)({},u,{},{doc:t});d(n)},f=function(e){var t=Object(j.a)({},u.doc,{},{regularityValue:e.detail.value});d(Object(j.a)({},u,{},{doc:t}))},p=function(e){var t=Object(j.a)({},u.doc,{},{difficulty:e.detail.value});d(Object(j.a)({},u,{},{doc:t}))},v=function(e){switch(e){case De.trivial:return"Easy peasy lemon squeezy";case De.easy:return"Piece of Cake";case De.medium:return"Let's Rock";case De.hard:return"No Pain, No Gain";case De.extreme:return"Death Wish"}},b=function(){d(Object(j.a)({},u,{},{showDeleteWarrning:!1}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(l.r,null,c.a.createElement(l.S,null,c.a.createElement(l.R,null,"Add Challenge"))),c.a.createElement(l.m,null,c.a.createElement(l.u,null,c.a.createElement(l.A,{position:"floating"},"Name"),c.a.createElement(l.t,{name:"name",placeholder:"Read book, Go running ...",onIonChange:h,value:u.doc.name})),c.a.createElement(l.u,null,c.a.createElement(l.A,{position:"floating"},"Note"),c.a.createElement(l.Q,{placeholder:"Enter more information here, motivate yourself...",name:"note",onIonChange:h,value:u.doc.note})),c.a.createElement(l.u,null,c.a.createElement(l.M,{value:u.doc.regularityInterval,onIonChange:function(e){return function(e){e=e||"day";var t=Object(j.a)({},u.doc,{},{regularityInterval:e,regularityValue:1}),n=Object(j.a)({},u.regularity,{},sa(e));d(Object(j.a)({},u,{},{doc:t,regularity:n}))}(e.detail.value)}},c.a.createElement(l.N,{value:"day"},c.a.createElement(l.A,null,"Daily")),c.a.createElement(l.N,{value:"week"},c.a.createElement(l.A,null,"Weekly")),c.a.createElement(l.N,{value:"month"},c.a.createElement(l.A,null,"Monthly")))),"day"!==u.doc.regularityInterval?c.a.createElement(c.a.Fragment,null,c.a.createElement(l.J,{min:u.regularity.min,max:u.regularity.max,debounce:100,value:u.doc.regularityIntervalGoal,onIonChange:f,color:"secondary"},c.a.createElement(l.A,{slot:"start"},u.regularity.min),c.a.createElement(l.A,{slot:"end"},u.regularity.max))):c.a.createElement(c.a.Fragment,null),c.a.createElement(l.u,null,c.a.createElement(l.A,null,function(){var e=u.doc.regularityIntervalGoal>1?" times a ":" time a ";return"day"===u.doc.regularityInterval?"I will repeat this task every day.":"I will repeat this task "+u.doc.regularityIntervalGoal+e+u.doc.regularityInterval}())),c.a.createElement(l.J,{min:0,max:4,debounce:100,value:u.doc.difficulty,onIonChange:p,color:"secondary"},c.a.createElement(l.A,{slot:"start"},V(v(De.trivial))),c.a.createElement(l.A,{slot:"end"},V(v(De.extreme)))),c.a.createElement(l.u,null,c.a.createElement(l.A,null,v(u.doc.difficulty)))),c.a.createElement(l.p,null,c.a.createElement(l.S,null,c.a.createElement(l.R,null,c.a.createElement(l.f,{onClick:function(){return n(u.doc,"save")}},"Save"),c.a.createElement(l.f,{onClick:function(){return n(null,"none")}},"Cancel")))),c.a.createElement(l.n,{horizontal:"end",vertical:"bottom"},c.a.createElement(l.o,{size:"small",color:"danger",onClick:function(){d(Object(j.a)({},u,{},{showDeleteWarrning:!0}))}},c.a.createElement(l.s,{size:"large",icon:At.I}))),c.a.createElement(l.b,{isOpen:u.showDeleteWarrning,onDidDismiss:function(){return b},header:"Warrning!!!",message:"Are you sure you want to <strong>delete</strong> this habit?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary"},{text:"Yes Im Sure",handler:function(){return b(),void n(u.doc,"remove")}}]}))},ca=(F()("challengelist"),function(e,t){switch(t.type){case"addChallengeModal":return Object(j.a)({},e,{},{showModal:!0,modalChalleng:t.data});case"hideChallengeModal":return Object(j.a)({},e,{},{showModal:!1,modalChalleng:null});case"loadChallenges":return Object(j.a)({},e,{},{challenges:t.data});case"challengeChange":return Object(j.a)({},e,{},{challenges:H(t.data,e.challenges)});default:return e}}),oa=function(e){var t=e.project,n=Object(i.useReducer)(ca,{showModal:!1,modalChallenge:null,challenges:[]}),a=Object(m.a)(n,2),r=a[0],s=a[1];Object(i.useEffect)((function(){var e=dt.subscribeByPropertyChange("secondaryType","challenge").subscribe((function(e){e.id.startsWith(le(t.id))&&u("challengeChange",e)}));return t.id&&o(t.id),function(){e.unsubscribe()}}),[t.id]);var o=function(){var e=Object(E.a)(x.a.mark((function e(t){var n,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.queryByProperty("secondaryType","equals","challenge","party");case 2:n=e.sent,a=n.filter((function(e){return e.id.startsWith(le(t))})),u("loadChallenges",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(e,t){s({type:e,data:t})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ye;u("addChallengeModal",e)},h=function(){u("hideChallengeModal",null)};return c.a.createElement(l.g,null,c.a.createElement(l.i,null,c.a.createElement(l.k,null,"Challenges")),c.a.createElement(l.h,null,c.a.createElement(l.C,null,r.challenges.map((function(e){return c.a.createElement(ra,{challenge:e,key:e.id,showEditModalFunction:d})}))),r.showModal?c.a.createElement(l.G,{isOpen:r.showModal,onDidDismiss:function(){return h()}},c.a.createElement(ia,{challenge:r.modalChallenge,dismissFunc:function(e,n){h(),"save"===n&&null!=e?Kt.saveChallenge(e,t):"remove"===n&&null!=e&&e.id}})):c.a.createElement(c.a.Fragment,null)),c.a.createElement(l.p,null,function(){var e=t.members.find((function(e){return e.id===st.userid}));return!!e&&ge(e.rights)}()?c.a.createElement(l.f,{onClick:function(){return d()},fill:"clear"},"Add New Challenge"):c.a.createElement(c.a.Fragment,null)))},ua={party:new Ue},la=function(){var e=Object(E.a)(x.a.mark((function e(t,n,a,r){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=dt.getReadySub().subscribe(function(){var e=Object(E.a)(x.a.mark((function e(i){var c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,dt.getDoc(t,"party");case 4:if(c=e.sent){e.next=9;break}return s.unsubscribe(),r.push("/parties"),e.abrupt("return");case 9:a(Object(j.a)({},n,{},{party:c})),s.unsubscribe();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),da=function(){var e=Object(y.i)().id,t=Object(y.g)(),n=Object(i.useState)(ua),a=Object(m.a)(n,2),r=a[0],s=a[1];Object(i.useRef)(new wn);return Object(i.useEffect)((function(){e?la(e,r,s,t):t.push("/parties")}),[e]),c.a.createElement(l.I,null,c.a.createElement(Vt,{title:"Party: "+r.party.name}),c.a.createElement(l.m,null,r.party.id?c.a.createElement(c.a.Fragment,null,c.a.createElement(Zn,{project:r.party}),c.a.createElement(oa,{project:r.party})):c.a.createElement(c.a.Fragment,null)))},ma=function(){var e=function(){var e=Object(i.useState)({status:Nt.loading,dataReady:!1,username:"Guest"}),t=Object(m.a)(e,2),n=t[0],a=t[1];Jt.info("APP Router Status: ",n),Object(i.useEffect)((function(){Jt.info("App Stats Effect::");var e=[dt.getReadySub().subscribe((function(e){e!==n.dataReady&&r()})),st.username$.subscribe(function(){var e=Object(E.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return st.getIsAuthenticated()&&st.renewToken(),r(),n=st.getUser().id,e.next=5,dt.init(n,"Guest"!==t);case 5:return e.next=7,yt.init(n);case 7:return e.next=9,Kt.init();case 9:dt.addSyncCall$.next();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())];return function(){e.map((function(e){return e.unsubscribe()}))}}),[]);var r=function(){var e=dt.ready,t=st.getUsername();e===n.dataReady&&t===n.username||(Jt.info("STATUS:",e,t,n),a(e?"Guest"===t?{status:Nt.guest,username:t,dataReady:e}:{status:Nt.auth,username:t,dataReady:e}:{status:Nt.loading,username:t,dataReady:e}))};return[n]}(),t=Object(m.a)(e,1)[0],n=Object(y.g)(),a=Object(y.h)();if(t.status===Nt.auth&&a.pathname.startsWith("/auth/")&&a.state){var r=a.state.prev||"/";n.push(r)}return function(){switch(t.status){case Nt.auth:return c.a.createElement(l.O,{when:"sm",contentId:"main"},c.a.createElement(Hn,{key:"menu"}),c.a.createElement(l.K,{id:"main"},c.a.createElement(y.c,{path:"/home",component:on,exact:!0}),c.a.createElement(y.c,{exact:!0,path:"/auth/user",component:g}),c.a.createElement(y.c,{path:"/todos",component:$t,exact:!0}),c.a.createElement(y.c,{path:"/todos/:list",component:$t,exact:!0}),c.a.createElement(y.c,{path:"/todos/tag/:tag",component:$t,exact:!0}),c.a.createElement(y.c,{path:"/habits",component:Dn,exact:!0}),c.a.createElement(y.c,{path:"/parties",component:Kn,exact:!0}),c.a.createElement(y.c,{path:"/parties/:id",component:da,exact:!0}),c.a.createElement(y.c,{path:"/",render:function(){return c.a.createElement(y.b,{to:"/home"})},exact:!0}),c.a.createElement(y.c,{path:"/404",component:un}),c.a.createElement(y.b,{to:"/404"})));case Nt.guest:return c.a.createElement(l.K,null,c.a.createElement(kn,{exact:!0,path:"*",component:on}));default:return c.a.createElement(l.K,null,c.a.createElement(y.c,{exact:!0,path:"*",component:qt}))}}()},ha=(n(333),function(){var e=Object(i.useState)(null),t=Object(m.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){var e=[et.messages$.subscribe((function(e){a(e)}))];return function(){e.map((function(e){return e.unsubscribe()}))}}),[n]),c.a.createElement("div",{className:"toastDiv"},c.a.createElement(Xe.a,{position:"top-right",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!0,rtl:!1,draggable:!0,pauseOnHover:!0}))}),fa=function(){return c.a.createElement(l.c,null,c.a.createElement(d.a,null,c.a.createElement(b,null),c.a.createElement(ha,null),c.a.createElement(ma,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(c.a.createElement(fa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[160,8,9]]]);
//# sourceMappingURL=main.aab0ecda.chunk.js.map